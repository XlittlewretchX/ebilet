{"version":3,"file":"scripts/main.a3c4d03b.js","mappings":"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,EAAG,6JAA8JF,KAAM,aAAkB,ECPhYU,GAAgB,CACvB,SACA,kBACA,cACA,eACA,SACA,kBACA,YACA,SACA,OACA,iBACA,MACA,aACA,UACA,QACA,YACA,YACA,UACA,SACA,WACA,SACA,UACA,YACA,UACA,YACA,YACA,cACA,YACA,QACA,WACA,WACA,cACA,SACA,YACA,mBACA,QACA,SACA,QACA,YACA,OACA,cACA,QACA,WACA,aACA,OACA,UACA,SACA,WACA,cACA,WACA,cACA,OACA,UACA,SACA,WACA,UACA,UACA,YACA,OACA,cACA,WACA,SACA,SACA,WACA,WACA,QACA,cACA,YACA,eACA,aACA,WACA,YACA,UACA,QACA,aACA,YACA,OACA,UACA,QACA,cACA,UACA,WACA,OACA,eACA,WACA,QACA,cACA,UACA,UACA,eACA,eACA,WACA,UACA,eACA,eACA,aACA,SACA,YACA,UACA,eACA,SACA,UACA,WACA,SACA,SACA,UACA,aACA,kBACA,eACA,WACA,UACA,gBACA,aACA,UACA,UACA,eACA,cACA,QACA,UACA,iBACA,gBACA,WACA,cACA,SACA,eACA,OACA,UACA,UACA,SACA,iBACA,WACA,UACA,aACA,SACA,YACA,SACA,eACA,WACA,oBACA,eACA,UACA,YACA,YACA,SACA,WACA,WACA,OACA,WACA,QACA,SACA,WACA,WACA,cACA,YACA,cACA,YACA,gBACA,QACA,cACA,MACA,WACA,YACA,eACA,YACA,UACA,WACA,eACA,SACA,mBACA,eACA,UACA,eACA,aACA,gBACA,eACA,2BACA,QACA,cACA,SACA,iBACA,iBACA,SACA,QACA,UC9FJ,SA/EiB,WACb,IAQqCzM,EARjC2I,EAAWZ,KACXxG,EAAkByG,IAAe,SAAU9D,GAAS,OAAOA,EAAM2D,IAAM,IAAGtG,gBAC1ElC,ECTD,WACH,IAAIsJ,EAAWZ,KACXhE,EAAOiE,IAAe,SAAU9D,GAAS,OAAOA,EAAMlE,IAAM,IAAG+D,KAC/D1E,EAAK2I,IAAe,SAAU9D,GAAS,OAAOA,EAAM2D,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","sources":["webpack://ebilet-client/./src/shared/api/api.ts","webpack://ebilet-client/./src/features/AuthModal/model/authSlice.ts","webpack://ebilet-client/./src/entities/Event/model/eventSlice.ts","webpack://ebilet-client/./src/features/ChangeCity/model/citySlice.ts","webpack://ebilet-client/./src/features/SearchBar/model/searchSlice.ts","webpack://ebilet-client/./src/features/Filters/filterSlice.ts","webpack://ebilet-client/./src/features/MobileMenu/model/mobileMenuSlice.ts","webpack://ebilet-client/./src/app/store.ts","webpack://ebilet-client/./src/shared/lib/hooks.ts","webpack://ebilet-client/./src/features/AuthModal/ui/AuthModal.module.scss?0490","webpack://ebilet-client/./src/features/AuthModal/ui/AuthModal.tsx","webpack://ebilet-client/./src/features/ChangeCity/ui/CityPicker.module.scss?6079","webpack://ebilet-client/./src/shared/ui/icons/index.tsx","webpack://ebilet-client/./src/shared/data/cities.ts","webpack://ebilet-client/./src/features/ChangeCity/ui/CityPicker.tsx","webpack://ebilet-client/./src/features/ChangeCity/model/useChangeCity.ts","webpack://ebilet-client/./src/features/UserMenu/UserMenu.module.scss?ab35","webpack://ebilet-client/./src/features/UserMenu/ui/UserMenu.tsx","webpack://ebilet-client/./src/features/UserMenu/model/useUserMenu.ts","webpack://ebilet-client/./src/features/MobileMenu/ui/MobileMenu.module.scss?b398","webpack://ebilet-client/./src/features/MobileMenu/ui/MobileMenu.tsx","webpack://ebilet-client/./src/widgets/Header/Header.module.scss?b2f0","webpack://ebilet-client/./src/features/SearchBar/ui/SearchBar.module.scss?48bf","webpack://ebilet-client/./src/features/SearchBar/ui/SearchBar.tsx","webpack://ebilet-client/./src/widgets/Header/Header.tsx","webpack://ebilet-client/./src/entities/Event/ui/EventCard.module.scss?0597","webpack://ebilet-client/./src/entities/Event/ui/EventCard.tsx","webpack://ebilet-client/./src/widgets/EventListWidget/ui/EventListWidget.module.scss?0634","webpack://ebilet-client/./src/widgets/EventListWidget/ui/EventListWidget.tsx","webpack://ebilet-client/./src/features/Filters/ui/Filters.module.scss?4c44","webpack://ebilet-client/./src/features/Filters/ui/Filters.tsx","webpack://ebilet-client/./src/features/DateStrip/ui/DateStrip.module.scss?e7a9","webpack://ebilet-client/./src/features/DateStrip/lib/utils.ts","webpack://ebilet-client/./src/features/DateStrip/model/useDateStrip.ts","webpack://ebilet-client/./src/features/DateStrip/model/types.ts","webpack://ebilet-client/./src/features/DateStrip/ui/CalendarModal.module.scss?a3c0","webpack://ebilet-client/./src/features/DateStrip/ui/CalendarModal.tsx","webpack://ebilet-client/./src/features/DateStrip/ui/DateStrip.tsx","webpack://ebilet-client/./src/pages/HomePage/HomePage.module.scss?d5c2","webpack://ebilet-client/./src/features/EventList/model/useEventList.ts","webpack://ebilet-client/./src/pages/HomePage/model/useHomePage.ts","webpack://ebilet-client/./src/shared/ui/AuthAlertModal.tsx","webpack://ebilet-client/./src/pages/HomePage/ui/HomePage.tsx","webpack://ebilet-client/./src/pages/ProfilePage/ProfilePage.module.scss?5c01","webpack://ebilet-client/./src/pages/ProfilePage/ProfilePage.tsx","webpack://ebilet-client/./src/pages/MyTicketPage/MyTicketPage.module.scss?e018","webpack://ebilet-client/./src/pages/MyTicketPage/MyTicketsPage.tsx","webpack://ebilet-client/./src/features/BuyTicket/ui/StepChooseSeat.module.scss?0cd0","webpack://ebilet-client/./src/features/BuyTicket/model/useChooseSeat.ts","webpack://ebilet-client/./src/features/BuyTicket/ui/common/StepContainer.module.scss?dfee","webpack://ebilet-client/./src/features/BuyTicket/ui/common/StepContainer.tsx","webpack://ebilet-client/./src/features/BuyTicket/ui/common/StepButtons.module.scss?e2a5","webpack://ebilet-client/./src/features/BuyTicket/ui/common/StepButtons.tsx","webpack://ebilet-client/./src/features/BuyTicket/ui/StepChooseSeat.tsx","webpack://ebilet-client/./src/features/BuyTicket/ui/StepUserData.module.scss?3b67","webpack://ebilet-client/./src/features/BuyTicket/model/useUserData.ts","webpack://ebilet-client/./src/features/BuyTicket/ui/StepUserData.tsx","webpack://ebilet-client/./src/features/BuyTicket/ui/StepPayment.module.scss?2a03","webpack://ebilet-client/./src/features/BuyTicket/ui/StepPayment.tsx","webpack://ebilet-client/./src/features/BuyTicket/model/usePayment.ts","webpack://ebilet-client/./src/features/BuyTicket/ui/StepSuccess.module.scss?61d6","webpack://ebilet-client/./src/features/BuyTicket/ui/StepSuccess.tsx","webpack://ebilet-client/./src/features/BuyTicket/ui/StepChooseCount.module.scss?fed7","webpack://ebilet-client/./src/features/BuyTicket/ui/StepChooseCount.tsx","webpack://ebilet-client/./src/features/BuyTicket/model/useChooseCount.ts","webpack://ebilet-client/./src/shared/ui/Toast.tsx","webpack://ebilet-client/./src/pages/BuyTicketPage/BuyTicketPage.tsx","webpack://ebilet-client/./src/shared/ui/ProtectedRoute.tsx","webpack://ebilet-client/./src/app/styles/App.module.scss?9134","webpack://ebilet-client/./src/App.tsx","webpack://ebilet-client/./src/index.tsx"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport axios from 'axios';\nvar API_URL = process.env.REACT_APP_API_URL;\nvar api = axios.create({\n    baseURL: API_URL,\n    headers: {\n        'Content-Type': 'application/json',\n    },\n});\napi.interceptors.request.use(function (config) {\n    var token = localStorage.getItem('token');\n    if (token) {\n        config.headers.Authorization = \"Bearer \".concat(token);\n    }\n    return config;\n});\nexport var authAPI = {\n    register: function (userData) { return __awaiter(void 0, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, api.post('/auth/register', userData)];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n    login: function (credentials) { return __awaiter(void 0, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, api.post('/auth/login', credentials)];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n    uploadAvatar: function (file) { return __awaiter(void 0, void 0, void 0, function () {\n        var formData, response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    formData = new FormData();\n                    formData.append('avatar', file);\n                    return [4 /*yield*/, api.post('/auth/avatar', formData, {\n                            headers: {\n                                'Content-Type': 'multipart/form-data',\n                            },\n                        })];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n    resetAvatar: function () { return __awaiter(void 0, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, api.delete('/auth/avatar')];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n    updateCity: function (city) { return __awaiter(void 0, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, api.patch('/auth/city', { city: city })];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n    addFavorite: function (eventId) { return __awaiter(void 0, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, api.post('/auth/favorite', { eventId: eventId })];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n    removeFavorite: function (eventId) { return __awaiter(void 0, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, api.delete('/auth/favorite', { data: { eventId: eventId } })];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n    getFavorites: function () { return __awaiter(void 0, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, api.get('/auth/favorites')];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n    buyTicket: function (data) { return __awaiter(void 0, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, api.post('/auth/buy-ticket', data)];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n    getUserTickets: function () { return __awaiter(void 0, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, api.get('/auth/my-tickets')];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n    checkAuth: function () { return __awaiter(void 0, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, api.get('/auth/check')];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n    updateUsername: function (username) { return __awaiter(void 0, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, api.patch('/auth/username', { username: username })];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n};\nexport var eventAPI = {\n    getAll: function () {\n        var args_1 = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args_1[_i] = arguments[_i];\n        }\n        return __awaiter(void 0, __spreadArray([], args_1, true), void 0, function (filters) {\n            var params, response;\n            if (filters === void 0) { filters = {}; }\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        params = new URLSearchParams();\n                        if (filters.category)\n                            params.append('category', filters.category);\n                        if (filters.subcategory)\n                            params.append('subcategory', filters.subcategory);\n                        if (filters.priceRange && typeof filters.priceRange === 'object') {\n                            if (filters.priceRange.min !== undefined)\n                                params.append('minPrice', String(filters.priceRange.min));\n                            if (filters.priceRange.max !== undefined)\n                                params.append('maxPrice', String(filters.priceRange.max));\n                        }\n                        if (filters.search)\n                            params.append('search', filters.search);\n                        if (filters.city)\n                            params.append('city', filters.city);\n                        return [4 /*yield*/, api.get('/events', { params: params })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.data];\n                }\n            });\n        });\n    },\n    getById: function (id) { return __awaiter(void 0, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, api.get(\"/events/\".concat(id))];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n    create: function (eventData) { return __awaiter(void 0, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, api.post('/events', eventData, {\n                        headers: {\n                            'Content-Type': 'multipart/form-data',\n                        },\n                    })];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n    getUserEvents: function () { return __awaiter(void 0, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, api.get('/events/user/events')];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n    getBookedSeats: function (eventId) { return __awaiter(void 0, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, api.get(\"/events/\".concat(eventId, \"/booked-seats\"))];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response.data];\n            }\n        });\n    }); },\n};\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar _a;\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { authAPI } from '@/shared/api/api';\nvar initialState = {\n    user: null,\n    token: localStorage.getItem('token'),\n    isAuthenticated: false,\n    loading: false,\n    error: null,\n    userTickets: [],\n};\nexport var register = createAsyncThunk('auth/register', function (userData_1, _a) { return __awaiter(void 0, [userData_1, _a], void 0, function (userData, _b) {\n    var response, err_1, error;\n    var rejectWithValue = _b.rejectWithValue;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                _c.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, authAPI.register(userData)];\n            case 1:\n                response = _c.sent();\n                localStorage.setItem('token', response.token);\n                return [2 /*return*/, response];\n            case 2:\n                err_1 = _c.sent();\n                error = err_1;\n                if (error.response &&\n                    error.response.data &&\n                    error.response.data.message) {\n                    return [2 /*return*/, rejectWithValue(error.response.data.message)];\n                }\n                return [2 /*return*/, rejectWithValue('Ошибка при регистрации')];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); });\nexport var login = createAsyncThunk('auth/login', function (credentials_1, _a) { return __awaiter(void 0, [credentials_1, _a], void 0, function (credentials, _b) {\n    var response, err_2, error;\n    var rejectWithValue = _b.rejectWithValue;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                _c.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, authAPI.login(credentials)];\n            case 1:\n                response = _c.sent();\n                localStorage.setItem('token', response.token);\n                return [2 /*return*/, response];\n            case 2:\n                err_2 = _c.sent();\n                error = err_2;\n                if (error.response &&\n                    error.response.data &&\n                    error.response.data.message) {\n                    return [2 /*return*/, rejectWithValue(error.response.data.message)];\n                }\n                return [2 /*return*/, rejectWithValue('Ошибка при входе')];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); });\nexport var uploadAvatar = createAsyncThunk('auth/uploadAvatar', function (file_1, _a) { return __awaiter(void 0, [file_1, _a], void 0, function (file, _b) {\n    var response, error_1;\n    var _c, _d;\n    var rejectWithValue = _b.rejectWithValue;\n    return __generator(this, function (_e) {\n        switch (_e.label) {\n            case 0:\n                _e.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, authAPI.uploadAvatar(file)];\n            case 1:\n                response = _e.sent();\n                return [2 /*return*/, response.avatarUrl];\n            case 2:\n                error_1 = _e.sent();\n                return [2 /*return*/, rejectWithValue(((_d = (_c = error_1.response) === null || _c === void 0 ? void 0 : _c.data) === null || _d === void 0 ? void 0 : _d.message) || 'Ошибка при загрузке аватара')];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); });\nexport var resetAvatar = createAsyncThunk('auth/resetAvatar', function (_1, _a) { return __awaiter(void 0, [_1, _a], void 0, function (_, _b) {\n    var error_2;\n    var _c, _d;\n    var rejectWithValue = _b.rejectWithValue;\n    return __generator(this, function (_e) {\n        switch (_e.label) {\n            case 0:\n                _e.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, authAPI.resetAvatar()];\n            case 1:\n                _e.sent();\n                return [2 /*return*/, undefined];\n            case 2:\n                error_2 = _e.sent();\n                return [2 /*return*/, rejectWithValue(((_d = (_c = error_2.response) === null || _c === void 0 ? void 0 : _c.data) === null || _d === void 0 ? void 0 : _d.message) || 'Ошибка при сбросе аватара')];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); });\nexport var updateCity = createAsyncThunk('auth/updateCity', function (city_1, _a) { return __awaiter(void 0, [city_1, _a], void 0, function (city, _b) {\n    var response, err_3;\n    var rejectWithValue = _b.rejectWithValue;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                _c.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, authAPI.updateCity(city)];\n            case 1:\n                response = _c.sent();\n                return [2 /*return*/, response.city];\n            case 2:\n                err_3 = _c.sent();\n                return [2 /*return*/, rejectWithValue('Ошибка при обновлении города')];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); });\nexport var updateUsername = createAsyncThunk('auth/updateUsername', function (username_1, _a) { return __awaiter(void 0, [username_1, _a], void 0, function (username, _b) {\n    var response, err_4;\n    var rejectWithValue = _b.rejectWithValue;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                _c.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, authAPI.updateUsername(username)];\n            case 1:\n                response = _c.sent();\n                return [2 /*return*/, response.username];\n            case 2:\n                err_4 = _c.sent();\n                return [2 /*return*/, rejectWithValue('Ошибка при обновлении имени пользователя')];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); });\nexport var addFavorite = createAsyncThunk('auth/addFavorite', function (eventId_1, _a) { return __awaiter(void 0, [eventId_1, _a], void 0, function (eventId, _b) {\n    var err_5;\n    var rejectWithValue = _b.rejectWithValue;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                _c.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, authAPI.addFavorite(eventId)];\n            case 1:\n                _c.sent();\n                return [2 /*return*/, eventId];\n            case 2:\n                err_5 = _c.sent();\n                return [2 /*return*/, rejectWithValue('Ошибка при добавлении в избранное')];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); });\nexport var removeFavorite = createAsyncThunk('auth/removeFavorite', function (eventId_1, _a) { return __awaiter(void 0, [eventId_1, _a], void 0, function (eventId, _b) {\n    var err_6;\n    var rejectWithValue = _b.rejectWithValue;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                _c.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, authAPI.removeFavorite(eventId)];\n            case 1:\n                _c.sent();\n                return [2 /*return*/, eventId];\n            case 2:\n                err_6 = _c.sent();\n                return [2 /*return*/, rejectWithValue('Ошибка при удалении из избранного')];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); });\nexport var fetchFavorites = createAsyncThunk('auth/fetchFavorites', function (_1, _a) { return __awaiter(void 0, [_1, _a], void 0, function (_, _b) {\n    var favorites, err_7;\n    var rejectWithValue = _b.rejectWithValue;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                _c.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, authAPI.getFavorites()];\n            case 1:\n                favorites = _c.sent();\n                return [2 /*return*/, favorites];\n            case 2:\n                err_7 = _c.sent();\n                return [2 /*return*/, rejectWithValue('Ошибка при получении избранного')];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); });\nexport var buyTicket = createAsyncThunk('auth/buyTicket', function (data_1, _a) { return __awaiter(void 0, [data_1, _a], void 0, function (data, _b) {\n    var ticket, err_8;\n    var rejectWithValue = _b.rejectWithValue;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                _c.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, authAPI.buyTicket(data)];\n            case 1:\n                ticket = _c.sent();\n                return [2 /*return*/, ticket];\n            case 2:\n                err_8 = _c.sent();\n                return [2 /*return*/, rejectWithValue('Ошибка при покупке билета')];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); });\nexport var fetchUserTickets = createAsyncThunk('auth/fetchUserTickets', function (_1, _a) { return __awaiter(void 0, [_1, _a], void 0, function (_, _b) {\n    var tickets, err_9;\n    var rejectWithValue = _b.rejectWithValue;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                _c.trys.push([0, 2, , 3]);\n                return [4 /*yield*/, authAPI.getUserTickets()];\n            case 1:\n                tickets = _c.sent();\n                return [2 /*return*/, tickets];\n            case 2:\n                err_9 = _c.sent();\n                return [2 /*return*/, rejectWithValue('Ошибка при получении билетов')];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); });\nexport var checkAuth = createAsyncThunk('auth/checkAuth', function (_1, _a) { return __awaiter(void 0, [_1, _a], void 0, function (_, _b) {\n    var token, response, err_10, error;\n    var _c, _d;\n    var rejectWithValue = _b.rejectWithValue;\n    return __generator(this, function (_e) {\n        switch (_e.label) {\n            case 0:\n                _e.trys.push([0, 2, , 3]);\n                token = localStorage.getItem('token');\n                if (!token) {\n                    return [2 /*return*/, rejectWithValue(null)];\n                }\n                return [4 /*yield*/, authAPI.checkAuth()];\n            case 1:\n                response = _e.sent();\n                return [2 /*return*/, response];\n            case 2:\n                err_10 = _e.sent();\n                error = err_10;\n                localStorage.removeItem('token');\n                if ((_d = (_c = error.response) === null || _c === void 0 ? void 0 : _c.data) === null || _d === void 0 ? void 0 : _d.message) {\n                    return [2 /*return*/, rejectWithValue(error.response.data.message)];\n                }\n                return [2 /*return*/, rejectWithValue('Ошибка аутентификации')];\n            case 3: return [2 /*return*/];\n        }\n    });\n}); });\nvar authSlice = createSlice({\n    name: 'auth',\n    initialState: initialState,\n    reducers: {\n        logout: function (state) {\n            state.user = null;\n            state.token = null;\n            state.isAuthenticated = false;\n            localStorage.removeItem('token');\n        },\n        clearError: function (state) {\n            state.error = null;\n        },\n    },\n    extraReducers: function (builder) {\n        builder\n            .addCase(register.pending, function (state) {\n            state.loading = true;\n            state.error = null;\n        })\n            .addCase(register.fulfilled, function (state, action) {\n            state.loading = false;\n            state.isAuthenticated = true;\n            state.user = action.payload.user;\n            state.token = action.payload.token;\n        })\n            .addCase(register.rejected, function (state, action) {\n            state.loading = false;\n            state.error =\n                action.payload ||\n                    action.error.message ||\n                    'Ошибка при регистрации';\n        })\n            .addCase(login.pending, function (state) {\n            state.loading = true;\n            state.error = null;\n        })\n            .addCase(login.fulfilled, function (state, action) {\n            state.loading = false;\n            state.isAuthenticated = true;\n            state.user = action.payload.user;\n            state.token = action.payload.token;\n        })\n            .addCase(login.rejected, function (state, action) {\n            state.loading = false;\n            state.error =\n                action.payload ||\n                    action.error.message ||\n                    'Ошибка при входе';\n        })\n            .addCase(uploadAvatar.fulfilled, function (state, action) {\n            if (state.user) {\n                state.user.avatarUrl = action.payload;\n            }\n        })\n            .addCase(resetAvatar.fulfilled, function (state, action) {\n            if (state.user) {\n                state.user.avatarUrl = undefined;\n            }\n        })\n            .addCase(updateCity.fulfilled, function (state, action) {\n            if (state.user) {\n                state.user.city = action.payload;\n            }\n        })\n            .addCase(updateUsername.fulfilled, function (state, action) {\n            if (state.user) {\n                state.user.username = action.payload;\n            }\n        })\n            .addCase(addFavorite.fulfilled, function (state, action) {\n            if (state.user) {\n                if (!state.user.favorites)\n                    state.user.favorites = [];\n                if (!state.user.favorites.includes(action.payload)) {\n                    state.user.favorites.push(action.payload);\n                }\n            }\n        })\n            .addCase(removeFavorite.fulfilled, function (state, action) {\n            if (state.user && state.user.favorites) {\n                state.user.favorites = state.user.favorites.filter(function (id) { return id !== action.payload; });\n            }\n        })\n            .addCase(fetchFavorites.fulfilled, function (state, action) {\n            if (state.user) {\n                state.user.favorites = action.payload.map(function (event) { return event.id; });\n            }\n        })\n            .addCase(buyTicket.pending, function (state) {\n            state.loading = true;\n            state.error = null;\n        })\n            .addCase(buyTicket.fulfilled, function (state, action) {\n            state.loading = false;\n            // Можно добавить ticket в отдельный state.tickets, если потребуется\n        })\n            .addCase(buyTicket.rejected, function (state, action) {\n            state.loading = false;\n            state.error = action.payload || 'Ошибка при покупке билета';\n        })\n            .addCase(fetchUserTickets.pending, function (state) {\n            state.loading = true;\n            state.error = null;\n        })\n            .addCase(fetchUserTickets.fulfilled, function (state, action) {\n            state.loading = false;\n            state.userTickets = action.payload;\n        })\n            .addCase(fetchUserTickets.rejected, function (state, action) {\n            state.loading = false;\n            state.error = action.payload || 'Ошибка при получении билетов';\n        })\n            .addCase(checkAuth.pending, function (state) {\n            state.loading = true;\n            state.error = null;\n        })\n            .addCase(checkAuth.fulfilled, function (state, action) {\n            state.loading = false;\n            state.isAuthenticated = true;\n            state.user = action.payload.user;\n            state.token = action.payload.token;\n        })\n            .addCase(checkAuth.rejected, function (state, action) {\n            state.loading = false;\n            state.isAuthenticated = false;\n            state.user = null;\n            state.token = null;\n            if (action.payload !== null) {\n                state.error = action.payload || 'Ошибка аутентификации';\n            }\n        });\n    },\n});\nexport var logout = (_a = authSlice.actions, _a.logout), clearError = _a.clearError;\nexport default authSlice.reducer;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { eventAPI } from '@/shared/api/api';\nvar initialState = {\n    events: [],\n    loading: false,\n    error: null,\n};\nexport var fetchEvents = createAsyncThunk('event/fetchEvents', function () {\n    var args_1 = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args_1[_i] = arguments[_i];\n    }\n    return __awaiter(void 0, __spreadArray([], args_1, true), void 0, function (filters) {\n        var response;\n        if (filters === void 0) { filters = {}; }\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, eventAPI.getAll(filters)];\n                case 1:\n                    response = _a.sent();\n                    return [2 /*return*/, response];\n            }\n        });\n    });\n});\nexport var fetchEventById = createAsyncThunk('event/fetchEventById', function (id) { return __awaiter(void 0, void 0, void 0, function () {\n    var response;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, eventAPI.getById(id)];\n            case 1:\n                response = _a.sent();\n                return [2 /*return*/, response];\n        }\n    });\n}); });\nexport var createEvent = createAsyncThunk('event/createEvent', function (eventData) { return __awaiter(void 0, void 0, void 0, function () {\n    var response;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, eventAPI.create(eventData)];\n            case 1:\n                response = _a.sent();\n                return [2 /*return*/, response];\n        }\n    });\n}); });\nexport var fetchUserEvents = createAsyncThunk('event/fetchUserEvents', function () { return __awaiter(void 0, void 0, void 0, function () {\n    var response;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, eventAPI.getUserEvents()];\n            case 1:\n                response = _a.sent();\n                return [2 /*return*/, response];\n        }\n    });\n}); });\nvar eventSlice = createSlice({\n    name: 'event',\n    initialState: initialState,\n    reducers: {\n        clearError: function (state) {\n            state.error = null;\n        },\n    },\n    extraReducers: function (builder) {\n        builder\n            .addCase(fetchEvents.pending, function (state) {\n            state.loading = true;\n            state.error = null;\n        })\n            .addCase(fetchEvents.fulfilled, function (state, action) {\n            state.loading = false;\n            state.events = action.payload;\n        })\n            .addCase(fetchEvents.rejected, function (state, action) {\n            state.loading = false;\n            state.error = action.error.message || 'Ошибка при загрузке событий';\n        })\n            .addCase(createEvent.pending, function (state) {\n            state.loading = true;\n            state.error = null;\n        })\n            .addCase(createEvent.fulfilled, function (state, action) {\n            state.loading = false;\n            state.events.unshift(action.payload);\n        })\n            .addCase(createEvent.rejected, function (state, action) {\n            state.loading = false;\n            state.error = action.error.message || 'Ошибка при создании события';\n        })\n            .addCase(fetchUserEvents.pending, function (state) {\n            state.loading = true;\n            state.error = null;\n        })\n            .addCase(fetchUserEvents.fulfilled, function (state, action) {\n            state.loading = false;\n            state.events = action.payload;\n        })\n            .addCase(fetchUserEvents.rejected, function (state, action) {\n            state.loading = false;\n            state.error =\n                action.error.message || 'Ошибка при загрузке событий пользователя';\n        });\n    },\n});\nexport var clearError = eventSlice.actions.clearError;\nexport default eventSlice.reducer;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar _a;\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nvar initialState = {\n    name: 'Город',\n    showPicker: false,\n};\n/**\n * Thunk для получения города по IP через IPGeolocation.io,\n * затем получения названия города на русском через Nominatim.\n */\nexport var fetchCityByIP = createAsyncThunk('city/fetchByIP', function (_1, _a) { return __awaiter(void 0, [_1, _a], void 0, function (_, _b) {\n    var apiKey, url, response, data, city, latitude, longitude, nominatimUrl, nomRes, nomData, ruCity, error_1;\n    var _c, _d, _e, _f;\n    var rejectWithValue = _b.rejectWithValue;\n    return __generator(this, function (_g) {\n        switch (_g.label) {\n            case 0:\n                _g.trys.push([0, 6, , 7]);\n                apiKey = process.env.REACT_APP_IPGEO_API_KEY;\n                if (!apiKey) {\n                    return [2 /*return*/, rejectWithValue('API key is not defined')];\n                }\n                url = \"https://api.ipgeolocation.io/ipgeo?apiKey=\".concat(apiKey);\n                return [4 /*yield*/, fetch(url)];\n            case 1:\n                response = _g.sent();\n                if (!response.ok) {\n                    return [2 /*return*/, rejectWithValue(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 API: \".concat(response.status))];\n                }\n                return [4 /*yield*/, response.json()];\n            case 2:\n                data = _g.sent();\n                city = data.city, latitude = data.latitude, longitude = data.longitude;\n                if (!latitude || !longitude) {\n                    return [2 /*return*/, city || 'Город'];\n                }\n                nominatimUrl = \"https://nominatim.openstreetmap.org/reverse?lat=\".concat(latitude, \"&lon=\").concat(longitude, \"&format=json&accept-language=ru\");\n                return [4 /*yield*/, fetch(nominatimUrl, {\n                        headers: {\n                            'User-Agent': 'ebilet-app/1.0 (your@email.com)'\n                        }\n                    })];\n            case 3:\n                nomRes = _g.sent();\n                if (!nomRes.ok) return [3 /*break*/, 5];\n                return [4 /*yield*/, nomRes.json()];\n            case 4:\n                nomData = _g.sent();\n                ruCity = ((_c = nomData.address) === null || _c === void 0 ? void 0 : _c.city) || ((_d = nomData.address) === null || _d === void 0 ? void 0 : _d.town) || ((_e = nomData.address) === null || _e === void 0 ? void 0 : _e.village) || ((_f = nomData.address) === null || _f === void 0 ? void 0 : _f.state);\n                if (ruCity) {\n                    return [2 /*return*/, ruCity];\n                }\n                _g.label = 5;\n            case 5: \n            // Fallback: английское название\n            return [2 /*return*/, city || 'Город'];\n            case 6:\n                error_1 = _g.sent();\n                return [2 /*return*/, rejectWithValue(error_1.message)];\n            case 7: return [2 /*return*/];\n        }\n    });\n}); });\nvar citySlice = createSlice({\n    name: 'city',\n    initialState: initialState,\n    reducers: {\n        openPicker: function (state) {\n            state.showPicker = true;\n        },\n        closePicker: function (state) {\n            state.showPicker = false;\n        },\n        setCity: function (state, action) {\n            state.name = action.payload;\n            state.showPicker = false;\n        },\n    },\n    extraReducers: function (builder) {\n        builder\n            .addCase(fetchCityByIP.fulfilled, function (state, _a) {\n            var payload = _a.payload;\n            state.name = payload;\n            state.showPicker = false;\n        })\n            .addCase(fetchCityByIP.rejected, function (state) {\n            state.showPicker = true;\n        });\n    },\n});\nexport var openPicker = (_a = citySlice.actions, _a.openPicker), closePicker = _a.closePicker, setCity = _a.setCity;\nexport default citySlice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\nvar initialState = { value: '' };\nvar searchSlice = createSlice({\n    name: 'search',\n    initialState: initialState,\n    reducers: {\n        setSearch: function (state, action) {\n            state.value = action.payload;\n        },\n    },\n});\nexport var setSearch = searchSlice.actions.setSearch;\nexport default searchSlice.reducer;\n","var _a;\nimport { createSlice } from '@reduxjs/toolkit';\nvar initialState = {\n    category: '',\n    subcategory: '',\n    dateRange: { start: '', end: '' },\n    priceRange: { min: 0, max: 10000 },\n    onlyMyCity: false,\n};\nvar filterSlice = createSlice({\n    name: 'filter',\n    initialState: initialState,\n    reducers: {\n        setFilters: function (state, action) {\n            return action.payload;\n        },\n        resetFilters: function () {\n            return initialState;\n        },\n    },\n});\nexport var setFilters = (_a = filterSlice.actions, _a.setFilters), resetFilters = _a.resetFilters;\nexport default filterSlice.reducer;\n","var _a;\nimport { createSlice } from '@reduxjs/toolkit';\nvar initialState = {\n    isOpen: false,\n    showLogoutConfirm: false,\n};\nvar mobileMenuSlice = createSlice({\n    name: 'mobileMenu',\n    initialState: initialState,\n    reducers: {\n        openMenu: function (state) {\n            state.isOpen = true;\n        },\n        closeMenu: function (state) {\n            state.isOpen = false;\n            state.showLogoutConfirm = false;\n        },\n        showLogoutConfirm: function (state) {\n            state.showLogoutConfirm = true;\n        },\n        hideLogoutConfirm: function (state) {\n            state.showLogoutConfirm = false;\n        },\n    },\n});\nexport var openMenu = (_a = mobileMenuSlice.actions, _a.openMenu), closeMenu = _a.closeMenu, showLogoutConfirm = _a.showLogoutConfirm, hideLogoutConfirm = _a.hideLogoutConfirm;\nexport default mobileMenuSlice.reducer;\n","import { configureStore } from '@reduxjs/toolkit';\nimport authReducer from '@/features/AuthModal/model/authSlice';\nimport eventReducer from '@/entities/Event/model/eventSlice';\nimport cityReducer from '@/features/ChangeCity/model/citySlice';\nimport searchReducer from '@/features/SearchBar/model/searchSlice';\nimport filterReducer from '@/features/Filters/filterSlice';\nimport mobileMenuReducer from '@/features/MobileMenu/model/mobileMenuSlice';\nexport var store = configureStore({\n    reducer: {\n        auth: authReducer,\n        event: eventReducer,\n        city: cityReducer,\n        search: searchReducer,\n        filter: filterReducer,\n        mobileMenu: mobileMenuReducer,\n    },\n});\n","import { useDispatch, useSelector } from 'react-redux';\nimport { useState, useEffect } from 'react';\nexport var useAppDispatch = function () { return useDispatch(); };\nexport var useAppSelector = useSelector;\nexport function useDebounce(value, delay) {\n    var _a = useState(value), debouncedValue = _a[0], setDebouncedValue = _a[1];\n    useEffect(function () {\n        var handler = setTimeout(function () {\n            setDebouncedValue(value);\n        }, delay);\n        return function () {\n            clearTimeout(handler);\n        };\n    }, [value, delay]);\n    return debouncedValue;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"overlay\":\"ZBn11TNK\",\"modal\":\"CUqvr6P1\",\"closeButton\":\"AHg1PWg4\",\"formGroup\":\"lm66XJB1\",\"error\":\"bJBRsEr3\",\"success\":\"afkZPFTr\",\"switch\":\"qRFgd7Gl\"};","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react';\nimport { useAppDispatch, useAppSelector } from '@/shared/lib/hooks';\nimport { login, register } from '@/features/AuthModal/model/authSlice';\nimport styles from '@/features/AuthModal/ui/AuthModal.module.scss';\nvar AuthModal = function (_a) {\n    var isOpen = _a.isOpen, onClose = _a.onClose;\n    var dispatch = useAppDispatch();\n    var _b = useAppSelector(function (state) { return state.auth; }), loading = _b.loading, error = _b.error, isAuthenticated = _b.isAuthenticated;\n    var city = useAppSelector(function (state) { return state.city.name; });\n    var _c = useState(true), isLogin = _c[0], setIsLogin = _c[1];\n    var _d = useState({\n        username: '',\n        email: '',\n        password: '',\n        confirmPassword: '',\n    }), formData = _d[0], setFormData = _d[1];\n    var _e = useState(''), successMessage = _e[0], setSuccessMessage = _e[1];\n    var handleChange = function (e) {\n        var _a;\n        setFormData(__assign(__assign({}, formData), (_a = {}, _a[e.target.name] = e.target.value, _a)));\n    };\n    var handleSubmit = function (e) { return __awaiter(void 0, void 0, void 0, function () {\n        var email, confirmPassword, loginData, confirmPassword, registerData, result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    e.preventDefault();\n                    if (!isLogin && formData.password !== formData.confirmPassword) {\n                        alert('Пароли не совпадают');\n                        return [2 /*return*/];\n                    }\n                    if (!isLogin) return [3 /*break*/, 2];\n                    email = formData.email, confirmPassword = formData.confirmPassword, loginData = __rest(formData, [\"email\", \"confirmPassword\"]);\n                    return [4 /*yield*/, dispatch(login(loginData))];\n                case 1:\n                    _a.sent();\n                    return [3 /*break*/, 4];\n                case 2:\n                    confirmPassword = formData.confirmPassword, registerData = __rest(formData, [\"confirmPassword\"]);\n                    return [4 /*yield*/, dispatch(register(__assign(__assign({}, registerData), { city: city })))];\n                case 3:\n                    result = _a.sent();\n                    if (register.fulfilled.match(result)) {\n                        setSuccessMessage('Вы успешно зарегистрировались!');\n                        setTimeout(function () {\n                            setSuccessMessage('');\n                            onClose();\n                        }, 1500);\n                    }\n                    _a.label = 4;\n                case 4: return [2 /*return*/];\n            }\n        });\n    }); };\n    useEffect(function () {\n        if (isOpen && isAuthenticated && isLogin) {\n            onClose();\n        }\n    }, [isAuthenticated, isOpen, isLogin, onClose]);\n    useEffect(function () {\n        if (isOpen) {\n            setFormData({\n                username: '',\n                email: '',\n                password: '',\n                confirmPassword: '',\n            });\n            setSuccessMessage('');\n        }\n    }, [isOpen, isLogin]);\n    function getScrollbarWidth() {\n        if (typeof window === 'undefined')\n            return 0;\n        var scrollDiv = document.createElement('div');\n        scrollDiv.style.width = '100px';\n        scrollDiv.style.height = '100px';\n        scrollDiv.style.overflow = 'scroll';\n        scrollDiv.style.position = 'absolute';\n        scrollDiv.style.top = '-9999px';\n        document.body.appendChild(scrollDiv);\n        var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n        document.body.removeChild(scrollDiv);\n        return scrollbarWidth;\n    }\n    useEffect(function () {\n        if (isOpen) {\n            var scrollbarWidth = getScrollbarWidth();\n            document.body.style.overflow = 'hidden';\n            if (scrollbarWidth > 0) {\n                document.body.style.paddingRight = \"\".concat(scrollbarWidth, \"px\");\n            }\n            var handleKeyDown_1 = function (e) {\n                if (e.key === 'Escape')\n                    onClose();\n            };\n            window.addEventListener('keydown', handleKeyDown_1);\n            return function () {\n                document.body.style.overflow = '';\n                document.body.style.paddingRight = '';\n                window.removeEventListener('keydown', handleKeyDown_1);\n            };\n        }\n        else {\n            document.body.style.overflow = '';\n            document.body.style.paddingRight = '';\n        }\n    }, [isOpen, onClose]);\n    if (!isOpen)\n        return null;\n    return (_jsx(\"div\", { className: styles.overlay, onClick: onClose, children: _jsxs(\"div\", { className: styles.modal, onClick: function (e) { return e.stopPropagation(); }, children: [_jsx(\"button\", { className: styles.closeButton, onClick: onClose, children: \"\\u00D7\" }), _jsx(\"h2\", { children: isLogin ? 'Вход' : 'Регистрация' }), _jsxs(\"form\", { onSubmit: handleSubmit, children: [_jsx(\"div\", { className: styles.formGroup, children: _jsx(\"input\", { type: \"text\", name: \"username\", placeholder: \"\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\", value: formData.username, onChange: handleChange, required: true }) }), !isLogin && (_jsx(\"div\", { className: styles.formGroup, children: _jsx(\"input\", { type: \"email\", name: \"email\", placeholder: \"Email\", value: formData.email, onChange: handleChange, required: true }) })), _jsx(\"div\", { className: styles.formGroup, children: _jsx(\"input\", { type: \"password\", name: \"password\", placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\", value: formData.password, onChange: handleChange, required: true }) }), !isLogin && (_jsx(\"div\", { className: styles.formGroup, children: _jsx(\"input\", { type: \"password\", name: \"confirmPassword\", placeholder: \"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\", value: formData.confirmPassword, onChange: handleChange, required: true }) })), _jsx(\"button\", { type: \"submit\", disabled: loading, children: loading ? 'Загрузка...' : isLogin ? 'Войти' : 'Зарегистрироваться' }), error && _jsx(\"p\", { className: styles.error, children: error }), successMessage && _jsx(\"p\", { className: styles.success, children: successMessage })] }), _jsxs(\"p\", { className: styles.switch, children: [isLogin ? 'Нет аккаунта?' : 'Уже есть аккаунт?', ' ', _jsx(\"button\", { onClick: function () { return setIsLogin(!isLogin); }, children: isLogin ? 'Зарегистрироваться' : 'Войти' })] })] }) }));\n};\nexport default AuthModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"hMlvBzBu\",\"container\":\"mX8m6dsH\",\"logo\":\"SgBtxXYj\",\"nav\":\"LV0ldczd\",\"link\":\"PlXkTaFW\",\"button\":\"W35HkNb0\",\"logoutPopover\":\"fnRzlgx5\",\"logoutActions\":\"YzHRfZVZ\",\"confirmBtn\":\"pMxsMESt\",\"cancelBtn\":\"PnMoRPJ3\",\"searchBar\":\"BWk64NSa\",\"userMenuWrapper\":\"IWwt_3L8\",\"userMenuButton\":\"ospsZC0b\",\"active\":\"rkfJZQDB\",\"avatar\":\"BXVsYKHg\",\"userName\":\"ahlR3h8P\",\"menuDropdown\":\"oe140BPK\",\"menuItem\":\"J80vCR_2\",\"menuDivider\":\"kWNXYMse\",\"menuLogoutConfirm\":\"tZOQ1jB6\",\"menuLogoutActions\":\"ul6ltbZJ\",\"cityPicker\":\"kTUf0kGC\",\"cityButton\":\"fEL3MMAt\",\"cityName\":\"fM4jt9LS\",\"cityModalOverlay\":\"L30DL5n3\",\"cityModal\":\"r7jyaAy1\",\"cityInput\":\"IXD9sEDJ\",\"citySuggestions\":\"l75q4Lc1\",\"citySuggestion\":\"IAIvkVq1\",\"citySuggestionActive\":\"erN_ZNXn\",\"cityModalActions\":\"a3hu4l6L\",\"menuConfirmBtn\":\"fAQaBm7b\",\"menuCancelBtn\":\"PlasbFNv\",\"fadeIn\":\"mafeXbUf\"};","import { jsx as _jsx } from \"react/jsx-runtime\";\nexport var MobileMenuIcon = function () { return (_jsx(\"svg\", { width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", children: _jsx(\"path\", { d: \"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\", fill: \"currentColor\" }) })); };\nexport var CloseIcon = function () { return (_jsx(\"svg\", { width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", children: _jsx(\"path\", { d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\", fill: \"currentColor\" }) })); };\nexport var ProfileIcon = function () { return (_jsx(\"svg\", { width: \"20\", height: \"20\", viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", children: _jsx(\"path\", { d: \"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\", fill: \"currentColor\" }) })); };\nexport var EventsIcon = function () { return (_jsx(\"svg\", { width: \"20\", height: \"20\", viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", children: _jsx(\"path\", { d: \"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z\", fill: \"currentColor\" }) })); };\nexport var LogoutIcon = function () { return (_jsx(\"svg\", { width: \"20\", height: \"20\", viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", children: _jsx(\"path\", { d: \"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z\", fill: \"currentColor\" }) })); };\nexport var LoginIcon = function () { return (_jsx(\"svg\", { width: \"20\", height: \"20\", viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", children: _jsx(\"path\", { d: \"M11 7L9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z\", fill: \"currentColor\" }) })); };\nexport var CityIcon = function () { return (_jsx(\"svg\", { width: \"20\", height: \"20\", viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", style: { marginRight: 6 }, children: _jsx(\"path\", { d: \"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\", fill: \"#007bff\" }) })); };\n","export var russianCities = [\n    'Москва',\n    'Санкт-Петербург',\n    'Новосибирск',\n    'Екатеринбург',\n    'Казань',\n    'Нижний Новгород',\n    'Челябинск',\n    'Самара',\n    'Омск',\n    'Ростов-на-Дону',\n    'Уфа',\n    'Красноярск',\n    'Воронеж',\n    'Пермь',\n    'Волгоград',\n    'Краснодар',\n    'Саратов',\n    'Тюмень',\n    'Тольятти',\n    'Ижевск',\n    'Барнаул',\n    'Ульяновск',\n    'Иркутск',\n    'Хабаровск',\n    'Ярославль',\n    'Владивосток',\n    'Махачкала',\n    'Томск',\n    'Оренбург',\n    'Кемерово',\n    'Новокузнецк',\n    'Рязань',\n    'Астрахань',\n    'Набережные Челны',\n    'Пенза',\n    'Липецк',\n    'Киров',\n    'Чебоксары',\n    'Тула',\n    'Калининград',\n    'Курск',\n    'Улан-Удэ',\n    'Ставрополь',\n    'Сочи',\n    'Иваново',\n    'Брянск',\n    'Белгород',\n    'Архангельск',\n    'Владимир',\n    'Севастополь',\n    'Чита',\n    'Грозный',\n    'Курган',\n    'Смоленск',\n    'Вологда',\n    'Саранск',\n    'Череповец',\n    'Орёл',\n    'Владикавказ',\n    'Мурманск',\n    'Якутск',\n    'Сургут',\n    'Волжский',\n    'Кострома',\n    'Тверь',\n    'Стерлитамак',\n    'Ингушетия',\n    'Новороссийск',\n    'Йошкар-Ола',\n    'Таганрог',\n    'Сыктывкар',\n    'Нальчик',\n    'Шахты',\n    'Нижнекамск',\n    'Дзержинск',\n    'Орск',\n    'Энгельс',\n    'Бийск',\n    'Прокопьевск',\n    'Рыбинск',\n    'Балашиха',\n    'Ухта',\n    'Старый Оскол',\n    'Златоуст',\n    'Миасс',\n    'Альметьевск',\n    'Королёв',\n    'Люберцы',\n    'Северодвинск',\n    'Петрозаводск',\n    'Норильск',\n    'Сызрань',\n    'Новочеркасск',\n    'Зеленодольск',\n    'Волгодонск',\n    'Абакан',\n    'Уссурийск',\n    'Салават',\n    'Электросталь',\n    'Бердск',\n    'Находка',\n    'Рубцовск',\n    'Майкоп',\n    'Ковров',\n    'Коломна',\n    'Кисловодск',\n    'Железнодорожный',\n    'Новомосковск',\n    'Серпухов',\n    'Назрань',\n    'Орехово-Зуево',\n    'Нефтекамск',\n    'Дербент',\n    'Камышин',\n    'Невинномысск',\n    'Красногорск',\n    'Муром',\n    'Батайск',\n    'Новочебоксарск',\n    'Сергиев Посад',\n    'Черкесск',\n    'Октябрьский',\n    'Ачинск',\n    'Новошахтинск',\n    'Елец',\n    'Арзамас',\n    'Обнинск',\n    'Элиста',\n    'Новокуйбышевск',\n    'Каспийск',\n    'Пушкино',\n    'Домодедово',\n    'Реутов',\n    'Жуковский',\n    'Глазов',\n    'Железногорск',\n    'Воткинск',\n    'Ленинск-Кузнецкий',\n    'Междуреченск',\n    'Сарапул',\n    'Ессентуки',\n    'Вихоревка',\n    'Губкин',\n    'Бугульма',\n    'Кумертау',\n    'Клин',\n    'Чапаевск',\n    'Саров',\n    'Волжск',\n    'Назарово',\n    'Тобольск',\n    'Усть-Илимск',\n    'Стрежевой',\n    'Зеленогорск',\n    'Соликамск',\n    'Горно-Алтайск',\n    'Канск',\n    'Новоалтайск',\n    'Бор',\n    'Шадринск',\n    'Мичуринск',\n    'Великие Луки',\n    'Киселёвск',\n    'Ангарск',\n    'Балаково',\n    'Благовещенск',\n    'Братск',\n    'Великий Новгород',\n    'Димитровград',\n    'Магадан',\n    'Магнитогорск',\n    'Нарьян-Мар',\n    'Нижневартовск',\n    'Нижний Тагил',\n    'Петропавловск-Камчатский',\n    'Псков',\n    'Симферополь',\n    'Тамбов',\n    'Ханты-Мансийск',\n    'Южно-Сахалинск',\n    'Ереван',\n    'Ташир',\n    'Калуга'\n];\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState, useEffect, useRef } from 'react';\nimport styles from '@/features/ChangeCity/ui/CityPicker.module.scss';\nimport { useChangeCity } from '@/features/ChangeCity/model/useChangeCity';\nimport { CityIcon } from '@/shared/ui/icons';\nimport { russianCities } from '@/shared/data/cities';\nimport { useAppDispatch } from '@/shared/lib/hooks';\nimport { setCity } from '@/features/ChangeCity/model/citySlice';\nimport { updateCity } from '@/features/AuthModal/model/authSlice';\nimport { useAppSelector } from '@/shared/lib/hooks';\nvar CityPicker = function () {\n    var dispatch = useAppDispatch();\n    var isAuthenticated = useAppSelector(function (state) { return state.auth; }).isAuthenticated;\n    var _a = useChangeCity(), displayCity = _a.displayCity, editing = _a.editing, input = _a.input, setEditing = _a.setEditing, setInput = _a.setInput, handleSave = _a.handleSave;\n    var _b = useState([]), suggestions = _b[0], setSuggestions = _b[1];\n    var _c = useState(-1), activeSuggestionIndex = _c[0], setActiveSuggestionIndex = _c[1];\n    var suggestionsRef = useRef(null);\n    var inputRef = useRef(null);\n    // Функция для получения сокращенного названия города\n    var getShortenedCityName = function (city) {\n        if (window.innerWidth <= 480) {\n            return city.length > 8 ? \"\".concat(city.slice(0, 8), \"...\") : city;\n        }\n        return city;\n    };\n    // Обработка изменений в поле ввода\n    var handleInputChange = function (e) {\n        var value = e.target.value;\n        setInput(value);\n        if (value.trim()) {\n            var filteredCities = russianCities.filter(function (city) {\n                return city.toLowerCase().startsWith(value.toLowerCase());\n            });\n            setSuggestions(filteredCities.slice(0, 5));\n            setActiveSuggestionIndex(-1);\n        }\n        else {\n            setSuggestions([]);\n        }\n    };\n    // Обработка выбора города из списка\n    var handleSuggestionClick = function (city) {\n        if (isAuthenticated) {\n            dispatch(updateCity(city));\n        }\n        dispatch(setCity(city));\n        setEditing(false);\n    };\n    // Обработка клавиатурной навигации\n    var handleKeyDown = function (e) {\n        if (suggestions.length === 0)\n            return;\n        switch (e.key) {\n            case 'ArrowDown':\n                e.preventDefault();\n                setActiveSuggestionIndex(function (prev) {\n                    return prev < suggestions.length - 1 ? prev + 1 : prev;\n                });\n                break;\n            case 'ArrowUp':\n                e.preventDefault();\n                setActiveSuggestionIndex(function (prev) { return prev > 0 ? prev - 1 : prev; });\n                break;\n            case 'Enter':\n                e.preventDefault();\n                if (activeSuggestionIndex >= 0) {\n                    handleSuggestionClick(suggestions[activeSuggestionIndex]);\n                }\n                else {\n                    handleSave();\n                }\n                break;\n            case 'Escape':\n                setSuggestions([]);\n                break;\n        }\n    };\n    // Закрытие списка при клике вне компонента\n    useEffect(function () {\n        var handleClickOutside = function (event) {\n            if (suggestionsRef.current && !suggestionsRef.current.contains(event.target)) {\n                setSuggestions([]);\n            }\n        };\n        document.addEventListener('mousedown', handleClickOutside);\n        return function () { return document.removeEventListener('mousedown', handleClickOutside); };\n    }, []);\n    return (_jsxs(\"div\", { className: styles.cityPicker, children: [_jsxs(\"button\", { className: styles.cityButton, onClick: function () { return setEditing(true); }, \"aria-label\": \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0433\\u043E\\u0440\\u043E\\u0434\", children: [_jsx(CityIcon, {}), _jsx(\"span\", { className: styles.cityName, title: displayCity, children: getShortenedCityName(displayCity) })] }), editing && (_jsx(\"div\", { className: styles.cityModalOverlay, onClick: function () { return setEditing(false); }, children: _jsxs(\"div\", { className: styles.cityModal, onClick: function (e) { return e.stopPropagation(); }, children: [_jsx(\"input\", { ref: inputRef, className: styles.cityInput, value: input, onChange: handleInputChange, onKeyDown: handleKeyDown, placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0433\\u043E\\u0440\\u043E\\u0434\", autoFocus: true }), suggestions.length > 0 && (_jsx(\"div\", { className: styles.citySuggestions, ref: suggestionsRef, children: suggestions.map(function (city, index) { return (_jsx(\"div\", { className: \"\".concat(styles.citySuggestion, \" \").concat(index === activeSuggestionIndex ? styles.citySuggestionActive : ''), onClick: function () { return handleSuggestionClick(city); }, children: city }, city)); }) })), _jsxs(\"div\", { className: styles.cityModalActions, children: [_jsx(\"button\", { className: styles.menuConfirmBtn, onClick: handleSave, children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\" }), _jsx(\"button\", { className: styles.menuCancelBtn, onClick: function () { return setEditing(false); }, children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\" })] })] }) }))] }));\n};\nexport default CityPicker;\n","import { useState, useEffect } from 'react';\nimport { useAppDispatch, useAppSelector } from '@/shared/lib/hooks';\nimport { setCity } from '@/features/ChangeCity/model/citySlice';\nimport { updateCity } from '@/features/AuthModal/model/authSlice';\nexport function useChangeCity() {\n    var dispatch = useAppDispatch();\n    var name = useAppSelector(function (state) { return state.city; }).name;\n    var _a = useAppSelector(function (state) { return state.auth; }), isAuthenticated = _a.isAuthenticated, user = _a.user;\n    var _b = useState(false), editing = _b[0], setEditing = _b[1];\n    var _c = useState(''), input = _c[0], setInput = _c[1];\n    // Определяем отображаемый город\n    var displayCity = isAuthenticated ? (user === null || user === void 0 ? void 0 : user.city) || 'Город' : name;\n    var handleSave = function () {\n        if (input.trim()) {\n            if (isAuthenticated) {\n                dispatch(updateCity(input.trim()));\n                dispatch(setCity(input.trim()));\n            }\n            else {\n                dispatch(setCity(input.trim()));\n            }\n            setEditing(false);\n        }\n    };\n    useEffect(function () {\n        setInput(displayCity);\n    }, [displayCity]);\n    return {\n        displayCity: displayCity,\n        editing: editing,\n        input: input,\n        setEditing: setEditing,\n        setInput: setInput,\n        handleSave: handleSave,\n    };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"sbNf0JrT\",\"container\":\"bAQaGRaO\",\"logo\":\"nkSOBkJ8\",\"nav\":\"Ml3KAkgs\",\"link\":\"Z5nwbD1w\",\"button\":\"BSRuFVLW\",\"logoutPopover\":\"o1rffZWo\",\"logoutActions\":\"bj63QqJQ\",\"confirmBtn\":\"_peFh5bh\",\"cancelBtn\":\"G8LunxJo\",\"searchBar\":\"D1IBH3fW\",\"userMenuWrapper\":\"u_gfar7T\",\"userMenuButton\":\"c4nqin0V\",\"active\":\"vznLq989\",\"avatar\":\"RtxXsOy1\",\"userName\":\"zAcwWXS1\",\"menuDropdown\":\"yOBgwguB\",\"menuItem\":\"ecktM8Mn\",\"menuDivider\":\"WzUGgLsP\",\"menuLogoutConfirm\":\"ODPKXZs7\",\"menuLogoutActions\":\"lUEi3qfW\",\"menuConfirmBtn\":\"V_MqE9EB\",\"menuCancelBtn\":\"fsUi_MnL\",\"cityPicker\":\"M2PfVFnI\",\"cityButton\":\"ub7L1k4l\",\"cityName\":\"Pgcfm96L\",\"cityModalOverlay\":\"P2nbT0PK\",\"cityModal\":\"vgfu0NUw\",\"cityInput\":\"X9E5VI0b\",\"cityModalActions\":\"Y60tgOBZ\"};","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React from 'react';\nimport styles from '../UserMenu.module.scss';\nimport { useUserMenu } from '../model/useUserMenu';\nvar UserMenu = function (_a) {\n    var user = _a.user, avatarUrl = _a.avatarUrl;\n    var _b = useUserMenu(), showUserMenu = _b.showUserMenu, showLogoutConfirm = _b.showLogoutConfirm, setShowUserMenu = _b.setShowUserMenu, setShowLogoutConfirm = _b.setShowLogoutConfirm, onLogout = _b.onLogout, onProfileClick = _b.onProfileClick;\n    React.useEffect(function () {\n        if (!showUserMenu)\n            return;\n        var handleClick = function (e) {\n            var menu = document.getElementById('user-menu-dropdown');\n            if (menu && !menu.contains(e.target)) {\n                setShowUserMenu(false);\n                setShowLogoutConfirm(false);\n            }\n        };\n        document.addEventListener('mousedown', handleClick);\n        return function () { return document.removeEventListener('mousedown', handleClick); };\n    }, [showUserMenu, setShowUserMenu, setShowLogoutConfirm]);\n    return (_jsxs(\"div\", { className: styles.userMenuWrapper, children: [_jsxs(\"button\", { className: styles.userMenuButton + (showUserMenu ? ' ' + styles.active : ''), onClick: function () {\n                    setShowUserMenu(!showUserMenu);\n                    setShowLogoutConfirm(false);\n                }, \"aria-haspopup\": \"true\", \"aria-expanded\": showUserMenu, children: [_jsx(\"img\", { src: avatarUrl, alt: \"avatar\", className: styles.avatar }), _jsx(\"span\", { className: styles.userName, children: user === null || user === void 0 ? void 0 : user.username })] }), showUserMenu && (_jsxs(\"div\", { className: styles.menuDropdown, id: \"user-menu-dropdown\", children: [_jsx(\"a\", { className: styles.menuItem, href: \"/profile\", onClick: function (e) {\n                            e.preventDefault();\n                            setShowUserMenu(false);\n                            onProfileClick();\n                        }, children: \"\\u041C\\u043E\\u0439 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\" }), _jsx(\"div\", { className: styles.menuDivider }), !showLogoutConfirm ? (_jsx(\"button\", { className: styles.menuItem, onClick: function () { return setShowLogoutConfirm(true); }, children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\" })) : (_jsxs(\"div\", { className: styles.menuLogoutConfirm, children: [\"\\u0412\\u044B\\u0439\\u0442\\u0438 \\u0438\\u0437 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430?\", _jsxs(\"div\", { className: styles.menuLogoutActions, children: [_jsx(\"button\", { className: styles.menuConfirmBtn, onClick: function () {\n                                            onLogout();\n                                            setShowLogoutConfirm(false);\n                                            setShowUserMenu(false);\n                                        }, children: \"\\u0414\\u0430\" }), _jsx(\"button\", { className: styles.menuCancelBtn, onClick: function () { return setShowLogoutConfirm(false); }, children: \"\\u041D\\u0435\\u0442\" })] })] }))] }))] }));\n};\nexport default UserMenu;\n","import { useState } from 'react';\nimport { useAppDispatch } from '@/shared/lib/hooks';\nimport { logout } from '@/features/AuthModal/model/authSlice';\nimport { useNavigate } from 'react-router-dom';\nexport function useUserMenu() {\n    var dispatch = useAppDispatch();\n    var navigate = useNavigate();\n    var _a = useState(false), showUserMenu = _a[0], setShowUserMenu = _a[1];\n    var _b = useState(false), showLogoutConfirm = _b[0], setShowLogoutConfirm = _b[1];\n    var onLogout = function () {\n        dispatch(logout());\n        setShowLogoutConfirm(false);\n        setShowUserMenu(false);\n    };\n    var onProfileClick = function () {\n        setShowUserMenu(false);\n        navigate('/profile');\n    };\n    return {\n        showUserMenu: showUserMenu,\n        showLogoutConfirm: showLogoutConfirm,\n        setShowUserMenu: setShowUserMenu,\n        setShowLogoutConfirm: setShowLogoutConfirm,\n        onLogout: onLogout,\n        onProfileClick: onProfileClick,\n    };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"mobileMenu\":\"vFxDmrvU\",\"active\":\"o4VsDbxP\",\"mobileMenuHeader\":\"frbACkJ_\",\"logo\":\"sqI0LMOw\",\"mobileMenuClose\":\"U1k4rMem\",\"mobileMenuContent\":\"rbWNWGgP\",\"mobileMenuItem\":\"GbgU173B\",\"mobileLoginButton\":\"ZV5CdtjW\",\"mobileCityPicker\":\"poijlVjc\",\"menuLogoutConfirm\":\"Q3b6hzAj\",\"menuLogoutActions\":\"wZKwQdaY\",\"menuConfirmBtn\":\"IV8BWnrl\",\"menuCancelBtn\":\"HrKCTqbm\"};","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { Link } from 'react-router-dom';\nimport { useAppDispatch, useAppSelector } from '@/shared/lib/hooks';\nimport { logout } from '@/features/AuthModal/model/authSlice';\nimport { closeMenu, showLogoutConfirm, hideLogoutConfirm } from '../model/mobileMenuSlice';\nimport CityPicker from '@/features/ChangeCity/ui/CityPicker';\nimport styles from './MobileMenu.module.scss';\nimport { CloseIcon, ProfileIcon, EventsIcon, LogoutIcon, LoginIcon, } from '@/shared/ui/icons';\nexport var MobileMenu = function (_a) {\n    var isAuthenticated = _a.isAuthenticated, onLoginClick = _a.onLoginClick;\n    var dispatch = useAppDispatch();\n    var _b = useAppSelector(function (state) { return state.mobileMenu; }), isOpen = _b.isOpen, isLogoutConfirmShown = _b.showLogoutConfirm;\n    var handleClose = function () {\n        dispatch(closeMenu());\n    };\n    var handleLogout = function () {\n        dispatch(logout());\n        handleClose();\n    };\n    return (_jsxs(\"div\", { className: \"\".concat(styles.mobileMenu, \" \").concat(isOpen ? styles.active : ''), children: [_jsxs(\"div\", { className: styles.mobileMenuHeader, children: [_jsx(Link, { to: \"/\", className: styles.logo, onClick: handleClose, children: \"eBilet\" }), _jsx(\"button\", { className: styles.mobileMenuClose, onClick: handleClose, children: _jsx(CloseIcon, {}) })] }), _jsxs(\"div\", { className: styles.mobileMenuContent, children: [_jsx(\"div\", { className: styles.mobileCityPicker, children: _jsx(CityPicker, {}) }), isAuthenticated ? (_jsxs(_Fragment, { children: [_jsxs(Link, { to: \"/my-tickets\", className: styles.mobileMenuItem, onClick: handleClose, children: [_jsx(EventsIcon, {}), \"\\u041C\\u043E\\u0438 \\u0441\\u043E\\u0431\\u044B\\u0442\\u0438\\u044F\"] }), _jsxs(Link, { to: \"/profile\", className: styles.mobileMenuItem, onClick: handleClose, children: [_jsx(ProfileIcon, {}), \"\\u041C\\u043E\\u0439 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"] }), !isLogoutConfirmShown ? (_jsxs(\"button\", { className: styles.mobileMenuItem, onClick: function () { return dispatch(showLogoutConfirm()); }, children: [_jsx(LogoutIcon, {}), \"\\u0412\\u044B\\u0439\\u0442\\u0438\"] })) : (_jsxs(\"div\", { className: styles.menuLogoutConfirm, children: [\"\\u0412\\u044B\\u0439\\u0442\\u0438 \\u0438\\u0437 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430?\", _jsxs(\"div\", { className: styles.menuLogoutActions, children: [_jsx(\"button\", { className: styles.menuConfirmBtn, onClick: handleLogout, children: \"\\u0414\\u0430\" }), _jsx(\"button\", { className: styles.menuCancelBtn, onClick: function () { return dispatch(hideLogoutConfirm()); }, children: \"\\u041D\\u0435\\u0442\" })] })] }))] })) : (_jsxs(\"button\", { className: styles.mobileLoginButton, onClick: function () {\n                            onLoginClick();\n                            handleClose();\n                        }, children: [_jsx(LoginIcon, {}), \"\\u0412\\u043E\\u0439\\u0442\\u0438\"] }))] })] }));\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"g41BiwqO\",\"container\":\"Ur4ZVcPj\",\"logo\":\"NZN2De8g\",\"nav\":\"EgI6UGtM\",\"link\":\"C12NQz6V\",\"button\":\"THy6AUoD\",\"logoutPopover\":\"DITH2JR3\",\"logoutActions\":\"hy7lr3q9\",\"confirmBtn\":\"fq1lTxxz\",\"cancelBtn\":\"AwKYNS8h\",\"searchBar\":\"dTqX9zMM\",\"userMenuWrapper\":\"GKc1NW_g\",\"userMenuButton\":\"G_LilOOb\",\"active\":\"bG6BJxtr\",\"avatar\":\"vD9OcSU_\",\"userName\":\"dcER7D6H\",\"menuDropdown\":\"HwnJLbb1\",\"menuItem\":\"Hk_VXIz1\",\"menuDivider\":\"cyuTijKJ\",\"menuLogoutConfirm\":\"MuoRyALr\",\"menuLogoutActions\":\"XILDDM0L\",\"menuConfirmBtn\":\"Dr8NfVnZ\",\"menuCancelBtn\":\"Ow7CCQKQ\",\"cityPicker\":\"UE3L1Aoj\",\"cityButton\":\"eSehS_yR\",\"cityName\":\"maPfvfs1\",\"cityModalOverlay\":\"oxd1lNGg\",\"cityModal\":\"QZkrSV_B\",\"cityInput\":\"vcoBf2jp\",\"cityModalActions\":\"fofNCli0\",\"mobileMenuButton\":\"z8gNbq6G\",\"mobileMenu\":\"RdAjiOeT\",\"mobileMenuHeader\":\"Qpvko7kw\",\"mobileMenuClose\":\"a9Bq2Fju\",\"mobileMenuContent\":\"_mVMPVIA\",\"mobileMenuItem\":\"rnsIAwmW\",\"mobileLoginButton\":\"TDmuQCUc\",\"mobileCityPicker\":\"oicb2lKl\"};","// extracted by mini-css-extract-plugin\nexport default {\"searchBar\":\"PGbuMa0s\"};","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useAppDispatch, useAppSelector } from '@/shared/lib/hooks';\nimport { setSearch } from '@/features/SearchBar/model/searchSlice';\nimport styles from '@/features/SearchBar/ui/SearchBar.module.scss';\nvar SearchBar = function () {\n    var dispatch = useAppDispatch();\n    var search = useAppSelector(function (state) { return state.search.value; });\n    return (_jsx(\"div\", { className: styles.searchBar, children: _jsx(\"input\", { type: \"text\", placeholder: \"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043C\\u0435\\u0440\\u043E\\u043F\\u0440\\u0438\\u044F\\u0442\\u0438\\u0439...\", value: search, onChange: function (e) { return dispatch(setSearch(e.target.value)); } }) }));\n};\nexport default SearchBar;\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAppDispatch, useAppSelector } from '@/shared/lib/hooks';\nimport { updateCity } from '@/features/AuthModal/model/authSlice';\nimport { fetchCityByIP, setCity } from '@/features/ChangeCity/model/citySlice';\nimport AuthModal from '@/features/AuthModal/ui/AuthModal';\nimport CityPicker from '@/features/ChangeCity/ui/CityPicker';\nimport UserMenu from '@/features/UserMenu/ui/UserMenu';\nimport { MobileMenu } from '@/features/MobileMenu/ui/MobileMenu';\nimport { openMenu } from '@/features/MobileMenu/model/mobileMenuSlice';\nimport styles from '@/widgets/Header/Header.module.scss';\nimport SearchBar from '@/features/SearchBar/ui/SearchBar';\nimport { MobileMenuIcon } from '@/shared/ui/icons';\nvar Header = function () {\n    var _a;\n    var dispatch = useAppDispatch();\n    var _b = useAppSelector(function (state) { return state.auth; }), user = _b.user, isAuthenticated = _b.isAuthenticated;\n    var _c = React.useState(false), isAuthModalOpen = _c[0], setIsAuthModalOpen = _c[1];\n    useEffect(function () {\n        if (!isAuthenticated) {\n            dispatch(fetchCityByIP()).then(function (result) {\n                if (fetchCityByIP.fulfilled.match(result)) {\n                    dispatch(setCity(result.payload));\n                }\n            });\n        }\n        else {\n            if (!(user === null || user === void 0 ? void 0 : user.city) || user.city === 'Город') {\n                dispatch(fetchCityByIP()).then(function (result) {\n                    if (fetchCityByIP.fulfilled.match(result)) {\n                        dispatch(updateCity(result.payload));\n                        dispatch(setCity(result.payload));\n                    }\n                });\n            }\n            else {\n                dispatch(setCity(user.city));\n            }\n        }\n    }, [isAuthenticated]);\n    var avatarUrl = (user === null || user === void 0 ? void 0 : user.avatarUrl)\n        ? (user.avatarUrl.startsWith('/uploads')\n            ? \"\".concat((_a = process.env.REACT_APP_API_URL) === null || _a === void 0 ? void 0 : _a.replace('/api', '')).concat(user.avatarUrl)\n            : user.avatarUrl)\n        : process.env.REACT_APP_DEFAULT_AVATAR_URL || '/img/default-avatar.svg';\n    return (_jsxs(\"header\", { className: styles.header, children: [_jsxs(\"div\", { className: styles.container, children: [_jsx(Link, { to: \"/\", className: styles.logo, children: \"eBilet\" }), _jsx(SearchBar, {}), _jsxs(\"nav\", { className: styles.nav, children: [_jsx(CityPicker, {}), isAuthenticated ? (_jsxs(_Fragment, { children: [_jsx(Link, { to: \"/my-tickets\", className: styles.link, children: \"\\u041C\\u043E\\u0438 \\u0441\\u043E\\u0431\\u044B\\u0442\\u0438\\u044F\" }), _jsx(UserMenu, { user: user, avatarUrl: avatarUrl })] })) : (_jsx(\"button\", { onClick: function () { return setIsAuthModalOpen(true); }, className: styles.button, children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\" }))] }), _jsx(\"button\", { className: styles.mobileMenuButton, onClick: function () { return dispatch(openMenu()); }, \"aria-label\": \"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u044C \\u043C\\u0435\\u043D\\u044E\", children: _jsx(MobileMenuIcon, {}) })] }), _jsx(MobileMenu, { isAuthenticated: isAuthenticated, onLoginClick: function () { return setIsAuthModalOpen(true); } }), _jsx(AuthModal, { isOpen: isAuthModalOpen, onClose: function () { return setIsAuthModalOpen(false); } })] }));\n};\nexport default Header;\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"q5cSkrMt\",\"imageContainer\":\"Ae6HeLkd\",\"image\":\"Y5GpHGmX\",\"content\":\"rwPoguZK\",\"title\":\"cck_aaWJ\",\"description\":\"HPiEpQok\",\"details\":\"FiozW65V\",\"date\":\"aYq2HTAm\",\"location\":\"SOh8XEf3\",\"price\":\"DkILKbzx\",\"actions\":\"LgrZNhg5\",\"favoriteButton\":\"EkpXFwbY\",\"buyButton\":\"BTMdkehq\"};","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport styles from './EventCard.module.scss';\nvar EventCard = function (_a) {\n    var _b;\n    var event = _a.event, isFavorite = _a.isFavorite, onAddToFavorites = _a.onAddToFavorites, onRemoveFromFavorites = _a.onRemoveFromFavorites, onBuyTicket = _a.onBuyTicket;\n    var formatDate = function (dateString) {\n        return new Date(dateString).toLocaleDateString('ru-RU', {\n            day: 'numeric',\n            month: 'long',\n            year: 'numeric',\n        });\n    };\n    // @ts-ignore: ticketCount и ticketSeats могут быть только для билетов\n    var ticketCount = event.ticketCount;\n    // @ts-ignore\n    var ticketSeats = event.ticketSeats;\n    return (_jsxs(\"div\", { className: styles.card, children: [event.imageUrl && (_jsx(\"div\", { className: styles.imageContainer, children: _jsx(\"img\", { src: event.imageUrl.startsWith('/uploads')\n                        ? \"\".concat((_b = process.env.REACT_APP_API_URL) === null || _b === void 0 ? void 0 : _b.replace('/api', '')).concat(event.imageUrl)\n                        : event.imageUrl, alt: event.title, className: styles.image }) })), _jsxs(\"div\", { className: styles.content, children: [_jsx(\"h3\", { className: styles.title, children: event.title }), _jsx(\"p\", { className: styles.description, children: event.description }), _jsxs(\"div\", { className: styles.details, children: [_jsx(\"span\", { className: styles.date, children: formatDate(event.date) }), _jsx(\"span\", { className: styles.location, children: event.location }), _jsxs(\"span\", { className: styles.price, children: [event.price, \" \\u20BD\"] })] }), (ticketCount || (ticketSeats && ticketSeats.length)) && (_jsxs(\"div\", { style: { margin: '8px 0', fontSize: '0.95em' }, children: [ticketCount && _jsxs(\"span\", { style: { marginRight: 12 }, children: [\"\\u041A\\u0443\\u043F\\u043B\\u0435\\u043D\\u043E \\u0431\\u0438\\u043B\\u0435\\u0442\\u043E\\u0432: \", _jsx(\"b\", { children: ticketCount })] }), ticketSeats && ticketSeats.length > 0 && (_jsxs(\"span\", { children: [\"\\u041C\\u0435\\u0441\\u0442\\u0430: \", _jsx(\"b\", { children: ticketSeats.join(', ') })] }))] })), _jsxs(\"div\", { className: styles.actions, children: [!event.isTicket && (_jsxs(_Fragment, { children: [isFavorite ? (_jsx(\"button\", { className: styles.favoriteButton, style: { color: '#2563eb', fontWeight: 700 }, onClick: function () { return onRemoveFromFavorites && onRemoveFromFavorites(event.id); }, children: \"\\u0418\\u0437 \\u0438\\u0437\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u0433\\u043E\" })) : (_jsx(\"button\", { className: styles.favoriteButton, onClick: function () { return onAddToFavorites(event.id); }, children: \"\\u0412 \\u0438\\u0437\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u0435\" })), _jsx(\"button\", { className: styles.buyButton, onClick: function () { return onBuyTicket(event.id); }, children: \"\\u041A\\u0443\\u043F\\u0438\\u0442\\u044C \\u0431\\u0438\\u043B\\u0435\\u0442\" })] })), event.isTicket && (_jsx(\"span\", { style: { color: '#22c55e', fontWeight: 600, fontSize: '1em' }, children: \"\\u0411\\u0438\\u043B\\u0435\\u0442 \\u043A\\u0443\\u043F\\u043B\\u0435\\u043D\" }))] })] })] }));\n};\nexport default EventCard;\n","// extracted by mini-css-extract-plugin\nexport default {\"eventsGrid\":\"qBEGkhBl\",\"skeletonCard\":\"RbbVmJFy\",\"skeletonPulse\":\"vpMKu1Ol\",\"skeletonImage\":\"vlm4unXd\",\"skeletonContent\":\"NBc2AoOt\",\"skeletonTitle\":\"f2LiwQAJ\",\"skeletonText\":\"zS2iyEE3\",\"skeletonActions\":\"R2oGtYoV\",\"emptyStub\":\"E8nCmBoI\",\"errorStub\":\"q9ZaeAke\",\"fadeIn\":\"RcMhUo2O\",\"emptyStubIcon\":\"YDzKGw5_\",\"emptyStubText\":\"mKiTZ3jb\",\"errorStubText\":\"ndbO5NyY\",\"errorStubIcon\":\"X8zyHPt9\"};","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport EventCard from '@/entities/Event/ui/EventCard';\nimport styles from './EventListWidget.module.scss';\nimport clsx from 'clsx';\nvar SKELETON_COUNT = 6;\nvar EventListWidget = function (_a) {\n    var events = _a.events, onAddToFavorites = _a.onAddToFavorites, onRemoveFromFavorites = _a.onRemoveFromFavorites, onBuyTicket = _a.onBuyTicket, loading = _a.loading, error = _a.error;\n    if (loading)\n        return (_jsx(\"div\", { className: styles.eventsGrid, children: Array.from({ length: SKELETON_COUNT }).map(function (_, idx) { return (_jsxs(\"div\", { className: clsx(styles.skeletonCard, styles.card), children: [_jsx(\"div\", { className: styles.skeletonImage }), _jsxs(\"div\", { className: styles.skeletonContent, children: [_jsx(\"div\", { className: styles.skeletonTitle }), _jsx(\"div\", { className: styles.skeletonText }), _jsx(\"div\", { className: styles.skeletonText }), _jsx(\"div\", { className: styles.skeletonActions })] })] }, idx)); }) }));\n    if (error)\n        return (_jsx(\"div\", { className: styles.eventsGrid, children: _jsxs(\"div\", { className: styles.errorStub, children: [_jsxs(\"svg\", { className: styles.errorStubIcon, viewBox: \"0 0 48 48\", fill: \"none\", children: [_jsx(\"circle\", { cx: \"24\", cy: \"24\", r: \"22\", fill: \"#ffd6d6\", stroke: \"#dc3545\", strokeWidth: \"2\" }), _jsx(\"path\", { d: \"M24 14v12\", stroke: \"#dc3545\", strokeWidth: \"3\", strokeLinecap: \"round\" }), _jsx(\"circle\", { cx: \"24\", cy: \"33\", r: \"2.5\", fill: \"#dc3545\" })] }), _jsxs(\"div\", { className: styles.errorStubText, children: [\"\\u041F\\u0440\\u043E\\u0438\\u0437\\u043E\\u0448\\u043B\\u0430 \\u043E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u043F\\u0440\\u0438 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0435 \\u0441\\u043E\\u0431\\u044B\\u0442\\u0438\\u0439.\", _jsx(\"br\", {}), \"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u043F\\u043E\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439\\u0442\\u0435 \\u043F\\u043E\\u0437\\u0436\\u0435.\"] })] }) }));\n    if (!events.length) {\n        return (_jsx(\"div\", { className: styles.eventsGrid, children: _jsxs(\"div\", { className: styles.emptyStub, children: [_jsxs(\"svg\", { className: styles.emptyStubIcon, viewBox: \"0 0 48 48\", fill: \"none\", children: [_jsx(\"circle\", { cx: \"24\", cy: \"24\", r: \"22\", fill: \"#e3e8ee\", stroke: \"#bfc8d6\", strokeWidth: \"2\" }), _jsx(\"path\", { d: \"M16 28c1.5-2 4.5-2 6 0s4.5 2 6 0\", stroke: \"#bfc8d6\", strokeWidth: \"2\", strokeLinecap: \"round\" }), _jsx(\"circle\", { cx: \"18\", cy: \"20\", r: \"2\", fill: \"#bfc8d6\" }), _jsx(\"circle\", { cx: \"30\", cy: \"20\", r: \"2\", fill: \"#bfc8d6\" })] }), _jsx(\"div\", { className: styles.emptyStubText, children: \"\\u041C\\u0435\\u0440\\u043E\\u043F\\u0440\\u0438\\u044F\\u0442\\u0438\\u044F \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B \\u043F\\u043E \\u0432\\u044B\\u0431\\u0440\\u0430\\u043D\\u043D\\u044B\\u043C \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440\\u0430\\u043C\" })] }) }));\n    }\n    return (_jsx(\"div\", { className: styles.eventsGrid, children: events.map(function (event) { return (_jsx(EventCard, { event: event, isFavorite: event.isFavorite, onAddToFavorites: onAddToFavorites, onRemoveFromFavorites: onRemoveFromFavorites, onBuyTicket: onBuyTicket }, event.id)); }) }));\n};\nexport default EventListWidget;\n","// extracted by mini-css-extract-plugin\nexport default {\"filters\":\"fwAkczIH\",\"open\":\"bZnCPQjS\",\"title\":\"iCXDBxH_\",\"section\":\"kBXyRaRk\",\"label\":\"GUckwTmH\",\"select\":\"Y8pf8z9R\",\"input\":\"ghCNQt6h\",\"dateRange\":\"bvfcjHbC\",\"priceRange\":\"yVFLEEy2\",\"mobileHeader\":\"mPsDzB1Y\",\"closeButton\":\"c1QaTwJw\",\"filterToggle\":\"T97yrrqq\",\"resetBtn\":\"jcw1xC7P\",\"checkboxWrapper\":\"L0Ssg5jW\"};","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react';\nimport styles from './Filters.module.scss';\nimport { useAppDispatch, useAppSelector } from '@/shared/lib/hooks';\nimport { setFilters, resetFilters } from '@/features/Filters/filterSlice';\nvar subcategoriesMap = {\n    concert: ['рок', 'поп', 'классика', 'джаз'],\n    theater: ['драма', 'комедия', 'мюзикл'],\n    exhibition: ['искусство', 'наука', 'технологии'],\n    sport: ['футбол', 'баскетбол', 'теннис'],\n};\nvar Filters = function () {\n    var dispatch = useAppDispatch();\n    var filters = useAppSelector(function (state) { return state.filter; });\n    var _a = useState(false), isOpen = _a[0], setIsOpen = _a[1];\n    // Блокируем скролл при открытом фильтре на мобильных\n    useEffect(function () {\n        if (isOpen) {\n            document.body.style.overflow = 'hidden';\n        }\n        else {\n            document.body.style.overflow = 'unset';\n        }\n        return function () {\n            document.body.style.overflow = 'unset';\n        };\n    }, [isOpen]);\n    var handleChange = function (field, value) {\n        var _a;\n        var newFilters = __assign(__assign({}, filters), (_a = {}, _a[field] = value, _a));\n        if (field === 'category') {\n            newFilters = __assign(__assign({}, newFilters), { subcategory: '' });\n        }\n        dispatch(setFilters(newFilters));\n    };\n    var handleReset = function () {\n        dispatch(resetFilters());\n    };\n    var toggleFilters = function () {\n        setIsOpen(!isOpen);\n    };\n    var closeFilters = function () {\n        setIsOpen(false);\n    };\n    var FilterContent = function () { return (_jsxs(_Fragment, { children: [_jsxs(\"div\", { className: styles.mobileHeader, children: [_jsx(\"h3\", { className: styles.title, children: \"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\" }), _jsx(\"button\", { className: styles.closeButton, onClick: closeFilters, \"aria-label\": \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\", children: _jsx(\"svg\", { width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", children: _jsx(\"path\", { d: \"M18 6L6 18M6 6L18 18\", stroke: \"currentColor\", strokeWidth: \"2\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }) }) })] }), _jsxs(\"div\", { className: styles.section, children: [_jsx(\"label\", { className: styles.label, children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\" }), _jsxs(\"select\", { className: styles.select, value: filters.category, onChange: function (e) { return handleChange('category', e.target.value); }, children: [_jsx(\"option\", { value: \"\", children: \"\\u0412\\u0441\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\" }), _jsx(\"option\", { value: \"concert\", children: \"\\u041A\\u043E\\u043D\\u0446\\u0435\\u0440\\u0442\\u044B\" }), _jsx(\"option\", { value: \"theater\", children: \"\\u0422\\u0435\\u0430\\u0442\\u0440\" }), _jsx(\"option\", { value: \"exhibition\", children: \"\\u0412\\u044B\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438\" }), _jsx(\"option\", { value: \"sport\", children: \"\\u0421\\u043F\\u043E\\u0440\\u0442\" })] })] }), filters.category && subcategoriesMap[filters.category] && (_jsxs(\"div\", { className: styles.section, children: [_jsx(\"label\", { className: styles.label, children: \"\\u041F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\" }), _jsxs(\"select\", { className: styles.select, value: filters.subcategory, onChange: function (e) { return handleChange('subcategory', e.target.value.toLowerCase()); }, children: [_jsx(\"option\", { value: \"\", children: \"\\u0412\\u0441\\u0435 \\u043F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\" }), subcategoriesMap[filters.category].map(function (subcat) { return (_jsx(\"option\", { value: subcat, children: subcat.charAt(0).toUpperCase() + subcat.slice(1) }, subcat)); })] })] })), _jsxs(\"div\", { className: styles.section, children: [_jsx(\"label\", { className: styles.label, children: \"\\u0426\\u0435\\u043D\\u0430\" }), _jsxs(\"div\", { className: styles.priceRange, children: [_jsx(\"input\", { type: \"number\", className: styles.input, placeholder: \"\\u041E\\u0442\", value: filters.priceRange.min, onChange: function (e) {\n                                    return handleChange('priceRange', __assign(__assign({}, filters.priceRange), { min: Number(e.target.value) }));\n                                } }), _jsx(\"input\", { type: \"number\", className: styles.input, placeholder: \"\\u0414\\u043E\", value: filters.priceRange.max, onChange: function (e) {\n                                    return handleChange('priceRange', __assign(__assign({}, filters.priceRange), { max: Number(e.target.value) }));\n                                } })] })] }), _jsx(\"div\", { className: styles.section, children: _jsxs(\"div\", { className: styles.checkboxWrapper, children: [_jsx(\"input\", { type: \"checkbox\", id: \"onlyMyCity\", checked: filters.onlyMyCity, onChange: function (e) { return handleChange('onlyMyCity', e.target.checked); } }), _jsx(\"label\", { htmlFor: \"onlyMyCity\", className: styles.label, style: { margin: 0 }, children: \"\\u0418\\u0441\\u043A\\u0430\\u0442\\u044C \\u0432 \\u043C\\u043E\\u0435\\u043C \\u0433\\u043E\\u0440\\u043E\\u0434\\u0435\" })] }) }), _jsx(\"button\", { className: styles.resetBtn, onClick: handleReset, children: \"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\" })] })); };\n    return (_jsxs(_Fragment, { children: [_jsxs(\"button\", { className: styles.filterToggle, onClick: toggleFilters, children: [_jsx(\"svg\", { width: \"20\", height: \"20\", viewBox: \"0 0 20 20\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", children: _jsx(\"path\", { d: \"M8.33333 15H11.6667V13.3333H8.33333V15ZM2.5 5V6.66667H17.5V5H2.5ZM5 10.8333H15V9.16667H5V10.8333Z\", fill: \"currentColor\" }) }), \"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\"] }), _jsx(\"div\", { className: \"\".concat(styles.filters, \" \").concat(isOpen ? styles.open : ''), children: _jsx(FilterContent, {}) })] }));\n};\nexport default Filters;\n","// extracted by mini-css-extract-plugin\nexport default {\"dateStrip\":\"aOSoyp7r\",\"monthBlock\":\"d4KLp_dD\",\"monthLabel\":\"_FNy51Xg\",\"arrow\":\"V45fxXZ2\",\"datesWrap\":\"TCZtD3bx\",\"dates\":\"NNJb7u6d\",\"date\":\"tx_zLngi\",\"selected\":\"L9cW5MAQ\",\"weekDay\":\"bBoisNcT\",\"today\":\"LSFm0ftZ\",\"dayNum\":\"QLvNlLJK\",\"calendarBtn\":\"q9fflxoV\"};","export var getMonthDays = function (year, month) {\n    var days = [];\n    var date = new Date(year, month, 1);\n    while (date.getMonth() === month) {\n        days.push(new Date(date));\n        date.setDate(date.getDate() + 1);\n    }\n    return days;\n};\nexport var pad = function (n) { return n.toString().padStart(2, '0'); };\nexport var formatDate = function (date) {\n    return \"\".concat(date.getFullYear(), \"-\").concat(pad(date.getMonth() + 1), \"-\").concat(pad(date.getDate()));\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useState, useEffect } from 'react';\nimport { formatDate } from '../lib/utils';\nexport var useDateStrip = function (_a) {\n    var onDateSelect = _a.onDateSelect, onRangeSelect = _a.onRangeSelect;\n    var today = new Date();\n    var _b = useState({\n        calendarOpen: false,\n        selectedDate: null,\n        selectedRange: [null, null],\n        month: today.getMonth(),\n        year: today.getFullYear(),\n    }), state = _b[0], setState = _b[1];\n    useEffect(function () {\n        if (!state.selectedDate && !state.selectedRange[0] && !state.selectedRange[1])\n            return;\n        var onReset = function () {\n            setState(function (prev) { return (__assign(__assign({}, prev), { selectedDate: null, selectedRange: [null, null] })); });\n        };\n        window.addEventListener('reset-date-strip', onReset);\n        return function () { return window.removeEventListener('reset-date-strip', onReset); };\n    }, [state.selectedDate, state.selectedRange]);\n    var handleDateClick = function (date) {\n        setState(function (prev) { return (__assign(__assign({}, prev), { selectedDate: date, selectedRange: [null, null] })); });\n        var formatted = formatDate(date);\n        onDateSelect(formatted);\n        onRangeSelect(formatted, formatted);\n    };\n    var handleCalendarChange = function (dates) {\n        if (Array.isArray(dates)) {\n            setState(function (prev) { return (__assign(__assign({}, prev), { selectedRange: dates, selectedDate: null })); });\n            if (dates[0] && dates[1]) {\n                onRangeSelect(formatDate(dates[0]), formatDate(dates[1]));\n                setState(function (prev) { return (__assign(__assign({}, prev), { calendarOpen: false })); });\n            }\n        }\n        else if (dates instanceof Date) {\n            setState(function (prev) { return (__assign(__assign({}, prev), { selectedDate: dates, selectedRange: [null, null] })); });\n            var formatted = formatDate(dates);\n            onDateSelect(formatted);\n            setState(function (prev) { return (__assign(__assign({}, prev), { calendarOpen: false })); });\n        }\n    };\n    var handleMonthChange = function (direction) {\n        setState(function (prev) {\n            var newMonth = direction === 'prev'\n                ? (prev.month === 0 ? 11 : prev.month - 1)\n                : (prev.month === 11 ? 0 : prev.month + 1);\n            var newYear = direction === 'prev' && prev.month === 0\n                ? prev.year - 1\n                : direction === 'next' && prev.month === 11\n                    ? prev.year + 1\n                    : prev.year;\n            return __assign(__assign({}, prev), { month: newMonth, year: newYear });\n        });\n    };\n    var handleClear = function () {\n        setState(function (prev) { return (__assign(__assign({}, prev), { selectedDate: null, selectedRange: [null, null], calendarOpen: false })); });\n        onRangeSelect('', '');\n    };\n    return {\n        state: state,\n        setState: setState,\n        handleDateClick: handleDateClick,\n        handleCalendarChange: handleCalendarChange,\n        handleMonthChange: handleMonthChange,\n        handleClear: handleClear,\n    };\n};\n","export var weekDays = ['ПН', 'ВТ', 'СР', 'ЧТ', 'ПТ', 'СБ', 'ВС'];\nexport var months = [\n    'Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь',\n    'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь',\n];\n","// extracted by mini-css-extract-plugin\nexport default {\"modalOverlay\":\"WROPTd0E\",\"modalContent\":\"vpc0jDIC\",\"modalAppear\":\"dgH1b6qa\",\"closeBtn\":\"xfTV9jjM\"};","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport { ru } from 'date-fns/locale';\nimport styles from './CalendarModal.module.scss';\nexport var CalendarModal = function (_a) {\n    var selectedDate = _a.selectedDate, selectedRange = _a.selectedRange, onCalendarChange = _a.onCalendarChange, onClose = _a.onClose, onClear = _a.onClear;\n    return (_jsx(\"div\", { className: styles.modalOverlay, onClick: onClose, children: _jsxs(\"div\", { className: styles.modalContent, onClick: function (e) { return e.stopPropagation(); }, children: [_jsx(DatePicker, { selected: selectedDate, onChange: onCalendarChange, startDate: selectedRange[0], endDate: selectedRange[1], selectsRange: true, inline: true, locale: ru, dateFormat: \"dd.MM.yyyy\" }), _jsxs(\"div\", { style: { display: 'flex', gap: '1rem', marginTop: '1rem' }, children: [_jsx(\"button\", { className: styles.closeBtn, onClick: onClose, children: \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\" }), _jsx(\"button\", { className: styles.closeBtn, style: { background: '#e3eaff', color: '#2563eb' }, onClick: onClear, children: \"\\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u044C\" })] })] }) }));\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport styles from './DateStrip.module.scss';\nimport { useDateStrip } from '../model/useDateStrip';\nimport { getMonthDays } from '../lib/utils';\nimport { weekDays, months } from '../model/types';\nimport { CalendarModal } from './CalendarModal';\nvar DateStrip = function (props) {\n    var _a = useDateStrip(props), state = _a.state, setState = _a.setState, handleDateClick = _a.handleDateClick, handleCalendarChange = _a.handleCalendarChange, handleMonthChange = _a.handleMonthChange, handleClear = _a.handleClear;\n    var today = new Date();\n    var days = getMonthDays(state.year, state.month);\n    var firstDay = new Date(state.year, state.month, 1).getDay();\n    if (firstDay === 0)\n        firstDay = 7;\n    var emptyCells = Array(firstDay - 1).fill(null);\n    return (_jsxs(\"div\", { className: styles.dateStrip, children: [_jsxs(\"div\", { className: styles.monthBlock, children: [_jsx(\"button\", { className: styles.arrow, onClick: function () { return handleMonthChange('prev'); }, children: \"\\u2190\" }), _jsxs(\"span\", { className: styles.monthLabel, children: [months[state.month], \" \", state.year] }), _jsx(\"button\", { className: styles.arrow, onClick: function () { return handleMonthChange('next'); }, children: \"\\u2192\" })] }), _jsx(\"div\", { className: styles.datesWrap, children: _jsx(\"div\", { className: styles.dates, children: days.map(function (date) {\n                        var isToday = date.toDateString() === today.toDateString();\n                        var isSelected = state.selectedDate &&\n                            date.toDateString() === state.selectedDate.toDateString();\n                        var weekDay = weekDays[(date.getDay() + 6) % 7];\n                        return (_jsxs(\"button\", { className: styles.date +\n                                (isSelected ? ' ' + styles.selected : '') +\n                                (isToday ? ' ' + styles.today : ''), onClick: function () { return handleDateClick(date); }, children: [_jsx(\"span\", { className: styles.weekDay, children: weekDay }), _jsx(\"span\", { className: styles.dayNum, children: date.getDate() })] }, date.toISOString()));\n                    }) }) }), _jsx(\"button\", { className: styles.calendarBtn, onClick: function () { return setState(function (prev) { return (__assign(__assign({}, prev), { calendarOpen: true })); }); } }), state.calendarOpen && (_jsx(CalendarModal, { selectedDate: state.selectedDate, selectedRange: state.selectedRange, onCalendarChange: handleCalendarChange, onClose: function () { return setState(function (prev) { return (__assign(__assign({}, prev), { calendarOpen: false })); }); }, onClear: handleClear }))] }));\n};\nexport default DateStrip;\n","// extracted by mini-css-extract-plugin\nexport default {\"homePage\":\"CgjxyfEd\",\"content\":\"RLut3f27\",\"sidebar\":\"slcXbDY8\",\"main\":\"zRDTHKjp\",\"eventsGrid\":\"UD6lwGa_\",\"loading\":\"oAFdJnbK\",\"error\":\"GUOZxmDe\"};","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useAppSelector } from '@/shared/lib/hooks';\nexport var useEventList = function () {\n    var events = useAppSelector(function (state) { return state.event; }).events;\n    var search = useAppSelector(function (state) { return state.search.value; });\n    var filters = useAppSelector(function (state) { return state.filter; });\n    // Фильтрация и сортировка событий по поисковому запросу и фильтрам\n    var normalizedSearch = search.trim().toLowerCase();\n    var filteredEvents = events.filter(function (event) {\n        // Поиск\n        var title = event.title.toLowerCase();\n        var matchesSearch = !normalizedSearch ||\n            title.startsWith(normalizedSearch) ||\n            title.includes(normalizedSearch);\n        // Категория\n        var matchesCategory = !filters.category ||\n            (event.category && event.category.trim().toLowerCase() === filters.category.trim().toLowerCase());\n        // Дата\n        var matchesDate = true;\n        var eventDate = (event.date || '').slice(0, 10);\n        var filterStart = (filters.dateRange.start || '').slice(0, 10);\n        var filterEnd = (filters.dateRange.end || '').slice(0, 10);\n        if (filterStart && filterEnd) {\n            matchesDate = eventDate >= filterStart && eventDate <= filterEnd;\n        }\n        else if (filterStart) {\n            matchesDate = eventDate >= filterStart;\n        }\n        else if (filterEnd) {\n            matchesDate = eventDate <= filterEnd;\n        }\n        // Цена\n        var matchesPrice = event.price >= filters.priceRange.min &&\n            event.price <= filters.priceRange.max;\n        return matchesSearch && matchesCategory && matchesDate && matchesPrice;\n    });\n    // Сортировка: сначала те, что начинаются с поискового запроса, потом содержащие\n    if (normalizedSearch) {\n        var startsWith = [];\n        var contains = [];\n        for (var _i = 0, filteredEvents_1 = filteredEvents; _i < filteredEvents_1.length; _i++) {\n            var event_1 = filteredEvents_1[_i];\n            var title = event_1.title.toLowerCase();\n            if (title.startsWith(normalizedSearch)) {\n                startsWith.push(event_1);\n            }\n            else if (title.includes(normalizedSearch)) {\n                contains.push(event_1);\n            }\n        }\n        filteredEvents = __spreadArray(__spreadArray([], startsWith, true), contains, true);\n    }\n    return { filteredEvents: filteredEvents };\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useAppSelector, useAppDispatch } from '@/shared/lib/hooks';\nimport { fetchEvents } from '@/entities/Event/model/eventSlice';\nimport { setFilters } from '@/features/Filters/filterSlice';\nimport { useEffect, useState } from 'react';\nimport { useEventList } from '@/features/EventList/model/useEventList';\nimport { useDebounce } from '@/shared/lib/hooks';\nimport { addFavorite, removeFavorite } from '@/features/AuthModal/model/authSlice';\nimport { useNavigate } from 'react-router-dom';\nexport var useHomePage = function () {\n    var dispatch = useAppDispatch();\n    var _a = useAppSelector(function (state) { return state.event; }), loading = _a.loading, error = _a.error;\n    var filters = useAppSelector(function (state) { return state.filter; });\n    var debouncedFilters = useDebounce(filters, 300);\n    var filteredEvents = useEventList().filteredEvents;\n    var _b = useState(false), showLoader = _b[0], setShowLoader = _b[1];\n    var search = useAppSelector(function (state) { return state.search.value; });\n    var city = useAppSelector(function (state) { return state.city.name; });\n    var favorites = useAppSelector(function (state) { var _a; return ((_a = state.auth.user) === null || _a === void 0 ? void 0 : _a.favorites) || []; });\n    var isAuthenticated = useAppSelector(function (state) { return state.auth.isAuthenticated; });\n    var _c = useState(false), showAuthAlert = _c[0], setShowAuthAlert = _c[1];\n    var _d = useState(false), showAuthModal = _d[0], setShowAuthModal = _d[1];\n    useEffect(function () {\n        var filtersToSend = __assign(__assign({}, debouncedFilters), { search: search });\n        if (debouncedFilters.onlyMyCity && city && city !== 'Город') {\n            filtersToSend.city = city;\n        }\n        else {\n            delete filtersToSend.city;\n        }\n        dispatch(fetchEvents(filtersToSend));\n    }, [dispatch, debouncedFilters, search, city]);\n    useEffect(function () {\n        var timeout = null;\n        if (loading) {\n            timeout = setTimeout(function () { return setShowLoader(true); }, 250); // 250 мс задержка\n        }\n        else {\n            setShowLoader(false);\n        }\n        return function () {\n            if (timeout)\n                clearTimeout(timeout);\n        };\n    }, [loading]);\n    var handleAddToFavorites = function (id) {\n        if (!isAuthenticated) {\n            setShowAuthAlert(true);\n            return;\n        }\n        dispatch(addFavorite(id));\n    };\n    var handleRemoveFromFavorites = function (id) {\n        dispatch(removeFavorite(id));\n    };\n    var navigate = useNavigate();\n    var handleBuyTicket = function (id) {\n        if (!isAuthenticated) {\n            setShowAuthAlert(true);\n            return;\n        }\n        navigate(\"/buy/\".concat(id));\n    };\n    var handleDateSelect = function (date) {\n        dispatch(setFilters(__assign(__assign({}, filters), { dateRange: { start: date, end: date } })));\n    };\n    var handleRangeSelect = function (start, end) {\n        dispatch(setFilters(__assign(__assign({}, filters), { dateRange: { start: start, end: end } })));\n    };\n    // Обогащаем события флагом избранного\n    var eventsWithFavorite = filteredEvents.map(function (event) { return (__assign(__assign({}, event), { isFavorite: favorites.includes(event.id) })); });\n    return {\n        loading: showLoader,\n        error: error,\n        filteredEvents: eventsWithFavorite,\n        handleAddToFavorites: handleAddToFavorites,\n        handleRemoveFromFavorites: handleRemoveFromFavorites,\n        handleBuyTicket: handleBuyTicket,\n        handleDateSelect: handleDateSelect,\n        handleRangeSelect: handleRangeSelect,\n        showAuthAlert: showAuthAlert,\n        setShowAuthAlert: setShowAuthAlert,\n        showAuthModal: showAuthModal,\n        setShowAuthModal: setShowAuthModal,\n        isAuthenticated: isAuthenticated,\n    };\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect } from 'react';\nfunction getScrollbarWidth() {\n    if (typeof window === 'undefined')\n        return 0;\n    var scrollDiv = document.createElement('div');\n    scrollDiv.style.width = '100px';\n    scrollDiv.style.height = '100px';\n    scrollDiv.style.overflow = 'scroll';\n    scrollDiv.style.position = 'absolute';\n    scrollDiv.style.top = '-9999px';\n    document.body.appendChild(scrollDiv);\n    var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n    document.body.removeChild(scrollDiv);\n    return scrollbarWidth;\n}\nvar modalStyle = {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    width: '100vw',\n    height: '100vh',\n    background: 'rgba(0,0,0,0.25)',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 2000,\n};\nvar boxStyle = {\n    background: '#fff',\n    borderRadius: 12,\n    padding: '2rem 2.5rem',\n    boxShadow: '0 4px 24px rgba(0,0,0,0.13)',\n    minWidth: 320,\n    maxWidth: '90vw',\n    textAlign: 'center',\n    position: 'relative',\n};\nvar buttonStyle = {\n    marginTop: 24,\n    padding: '0.7rem 2.2rem',\n    borderRadius: 24,\n    border: 'none',\n    background: '#2563eb',\n    color: '#fff',\n    fontWeight: 600,\n    fontSize: '1.1rem',\n    cursor: 'pointer',\n};\nvar closeStyle = {\n    position: 'absolute',\n    top: 10,\n    right: 16,\n    fontSize: 22,\n    color: '#888',\n    background: 'none',\n    border: 'none',\n    cursor: 'pointer',\n};\nvar AuthAlertModal = function (_a) {\n    var isOpen = _a.isOpen, onClose = _a.onClose, onAuthClick = _a.onAuthClick;\n    useEffect(function () {\n        if (isOpen) {\n            var scrollbarWidth = getScrollbarWidth();\n            document.body.style.overflow = 'hidden';\n            if (scrollbarWidth > 0) {\n                document.body.style.paddingRight = \"\".concat(scrollbarWidth, \"px\");\n            }\n            var handleKeyDown_1 = function (e) {\n                if (e.key === 'Escape')\n                    onClose();\n            };\n            window.addEventListener('keydown', handleKeyDown_1);\n            return function () {\n                document.body.style.overflow = '';\n                document.body.style.paddingRight = '';\n                window.removeEventListener('keydown', handleKeyDown_1);\n            };\n        }\n        else {\n            document.body.style.overflow = '';\n            document.body.style.paddingRight = '';\n        }\n    }, [isOpen, onClose]);\n    if (!isOpen)\n        return null;\n    return (_jsx(\"div\", { style: modalStyle, onClick: onClose, children: _jsxs(\"div\", { style: boxStyle, onClick: function (e) { return e.stopPropagation(); }, children: [_jsx(\"button\", { style: closeStyle, onClick: onClose, \"aria-label\": \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\", children: \"\\u00D7\" }), _jsx(\"div\", { style: { fontSize: '1.15rem', color: '#222', marginBottom: 16 }, children: \"\\u0414\\u043B\\u044F \\u043F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0435\\u043D\\u0438\\u044F \\u043D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0432\\u043E\\u0439\\u0442\\u0438 \\u0432 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\" }), _jsx(\"button\", { style: buttonStyle, onClick: onAuthClick, children: \"\\u0412\\u043E\\u0439\\u0442\\u0438 \\u0438\\u043B\\u0438 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\" })] }) }));\n};\nexport default AuthAlertModal;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React from 'react';\nimport { useAppSelector, useAppDispatch } from '@/shared/lib/hooks';\nimport EventListWidget from '@/widgets/EventListWidget/ui/EventListWidget';\nimport Filters from '@/features/Filters/ui/Filters';\nimport DateStrip from '@/features/DateStrip/ui/DateStrip';\nimport styles from '@/pages/HomePage/HomePage.module.scss';\nimport { useHomePage } from '../model/useHomePage';\nimport AuthModal from '@/features/AuthModal/ui/AuthModal';\nimport AuthAlertModal from '@/shared/ui/AuthAlertModal';\nimport { fetchFavorites } from '@/features/AuthModal/model/authSlice';\nvar HomePage = function () {\n    var _a = useHomePage(), loading = _a.loading, error = _a.error, filteredEvents = _a.filteredEvents, handleAddToFavorites = _a.handleAddToFavorites, handleRemoveFromFavorites = _a.handleRemoveFromFavorites, handleBuyTicket = _a.handleBuyTicket, handleDateSelect = _a.handleDateSelect, handleRangeSelect = _a.handleRangeSelect, showAuthAlert = _a.showAuthAlert, setShowAuthAlert = _a.setShowAuthAlert, showAuthModal = _a.showAuthModal, setShowAuthModal = _a.setShowAuthModal;\n    var dispatch = useAppDispatch();\n    var isAuthenticated = useAppSelector(function (state) { return state.auth.isAuthenticated; });\n    React.useEffect(function () {\n        if (isAuthenticated) {\n            dispatch(fetchFavorites());\n        }\n    }, [isAuthenticated, dispatch]);\n    if (loading)\n        return _jsx(\"div\", { className: styles.loading, children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\" });\n    if (error)\n        return _jsxs(\"div\", { className: styles.error, children: [\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \", error] });\n    return (_jsxs(\"div\", { className: styles.homePage, children: [_jsx(\"div\", { style: { display: 'flex', alignItems: 'center', gap: '1.5rem', marginBottom: '-1.5rem' }, children: _jsx(DateStrip, { onDateSelect: handleDateSelect, onRangeSelect: handleRangeSelect }) }), _jsxs(\"div\", { className: styles.content, children: [_jsx(\"aside\", { className: styles.sidebar, children: _jsx(Filters, {}) }), _jsx(\"main\", { className: styles.main, children: _jsx(EventListWidget, { events: filteredEvents, onAddToFavorites: handleAddToFavorites, onRemoveFromFavorites: handleRemoveFromFavorites, onBuyTicket: handleBuyTicket, loading: loading, error: error }) })] }), _jsx(AuthAlertModal, { isOpen: showAuthAlert, onClose: function () { return setShowAuthAlert(false); }, onAuthClick: function () {\n                    setShowAuthAlert(false);\n                    setShowAuthModal(true);\n                } }), _jsx(AuthModal, { isOpen: showAuthModal, onClose: function () { return setShowAuthModal(false); } })] }));\n};\nexport default HomePage;\n","// extracted by mini-css-extract-plugin\nexport default {\"profilePage\":\"Crw2kdr1\",\"container\":\"C39kYaHZ\",\"profileMain\":\"wrxPl7G8\",\"greetingBlock\":\"IdcN0Kf5\",\"avatarWrapper\":\"twJoggpY\",\"avatarBg\":\"_3vJED9ON\",\"avatarPulse\":\"I9BSgKT1\",\"avatar\":\"KJlTLrGi\",\"greeting\":\"glgAjrDd\",\"fadeIn\":\"RT_g0Tze\",\"userInfo\":\"dkPJn_jE\",\"quickActions\":\"cmk1F0Pv\",\"quickActionBtn\":\"H5IQESIf\",\"stats\":\"cr0iTSDn\",\"statItem\":\"oRSOIwGU\",\"statValue\":\"DhyDvIL9\",\"statLabel\":\"mt2JOtaW\",\"avatarActions\":\"tth8oZQi\",\"avatarUpload\":\"_RzXGQFk\",\"avatarReset\":\"PUoqcH9F\",\"usernameEdit\":\"KhMsW4vD\",\"usernameInput\":\"G3rIQyMw\",\"usernameActions\":\"f3wr_G8C\",\"saveButton\":\"uHtTRs6c\",\"cancelButton\":\"SeuQM5i6\",\"info\":\"cZJTIiqp\",\"form\":\"EJOHFjYL\",\"formGroup\":\"EbW2xjXI\",\"actions\":\"EXuRoKnY\",\"editButton\":\"uXDX9P80\",\"events\":\"sudOS0eV\",\"eventsGrid\":\"DzmiSDRR\",\"emptyStub\":\"NcgMZ5rf\",\"emptyStubIcon\":\"yyIUiAGA\",\"emptyStubText\":\"bhtGYl1S\",\"loading\":\"ZW_on0Wd\",\"error\":\"cnbyq8qV\",\"profile\":\"nN4bYVhl\",\"logoutBtn\":\"ZY5CyOvD\",\"logoutConfirmBox\":\"xRLXsmc7\",\"logoutConfirmText\":\"UOOBhP8t\",\"logoutConfirmActions\":\"F8SWk08z\",\"confirmBtn\":\"XbW9JRyl\",\"cancelBtn\":\"Bgg_oSA9\",\"logoutWrapper\":\"ocqDJswv\",\"updateError\":\"K_FPgpUV\"};","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport { useAppDispatch, useAppSelector } from '@/shared/lib/hooks';\nimport { fetchUserEvents } from '@/entities/Event/model/eventSlice';\nimport { uploadAvatar, logout, updateUsername, resetAvatar, fetchUserTickets } from '@/features/AuthModal/model/authSlice';\nimport styles from './ProfilePage.module.scss';\nimport { useNavigate } from 'react-router-dom';\nvar ProfilePage = function () {\n    var _a;\n    var navigate = useNavigate();\n    var dispatch = useAppDispatch();\n    var user = useAppSelector(function (state) { return state.auth; }).user;\n    var _b = useAppSelector(function (state) { return state.event; }), events = _b.events, loading = _b.loading, error = _b.error;\n    var _c = useState(false), isEditing = _c[0], setIsEditing = _c[1];\n    var _d = useState(false), showLogoutConfirm = _d[0], setShowLogoutConfirm = _d[1];\n    var _e = useState((user === null || user === void 0 ? void 0 : user.username) || ''), username = _e[0], setUsername = _e[1];\n    var _f = useState(null), updateError = _f[0], setUpdateError = _f[1];\n    var userTickets = useAppSelector(function (state) { return state.auth.userTickets || []; });\n    useEffect(function () {\n        if (user) {\n            dispatch(fetchUserEvents());\n            dispatch(fetchUserTickets());\n        }\n    }, [dispatch, user]);\n    var handleAvatarChange = function (e) { return __awaiter(void 0, void 0, void 0, function () {\n        var file;\n        var _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    file = (_a = e.target.files) === null || _a === void 0 ? void 0 : _a[0];\n                    if (!file) return [3 /*break*/, 2];\n                    return [4 /*yield*/, dispatch(uploadAvatar(file))];\n                case 1:\n                    _b.sent();\n                    _b.label = 2;\n                case 2: return [2 /*return*/];\n            }\n        });\n    }); };\n    var handleResetAvatar = function () { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, dispatch(resetAvatar())];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    }); };\n    var handleUsernameSave = function () { return __awaiter(void 0, void 0, void 0, function () {\n        var result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    setUpdateError(null);\n                    if (!(username.trim() && username !== (user === null || user === void 0 ? void 0 : user.username))) return [3 /*break*/, 2];\n                    return [4 /*yield*/, dispatch(updateUsername(username))];\n                case 1:\n                    result = _a.sent();\n                    if (updateUsername.fulfilled.match(result)) {\n                        setIsEditing(false);\n                    }\n                    else if (updateUsername.rejected.match(result)) {\n                        setUpdateError(result.payload || 'Ошибка при обновлении имени');\n                    }\n                    return [3 /*break*/, 3];\n                case 2:\n                    setIsEditing(false);\n                    _a.label = 3;\n                case 3: return [2 /*return*/];\n            }\n        });\n    }); };\n    if (!user) {\n        return _jsx(\"div\", { className: styles.error, children: \"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u043E\\u0439\\u0434\\u0438\\u0442\\u0435 \\u0432 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443\" });\n    }\n    if (loading) {\n        return _jsx(\"div\", { className: styles.loading, children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\" });\n    }\n    if (error) {\n        return _jsx(\"div\", { className: styles.error, children: error });\n    }\n    return (_jsx(\"div\", { className: styles.profilePage, children: _jsx(\"div\", { className: styles.container, children: _jsxs(\"div\", { className: styles.profileMain, children: [_jsxs(\"div\", { className: styles.avatarWrapper, children: [_jsx(\"div\", { className: styles.avatarBg }), _jsx(\"img\", { src: user.avatarUrl\n                                    ? (user.avatarUrl.startsWith('/uploads')\n                                        ? \"\".concat((_a = process.env.REACT_APP_API_URL) === null || _a === void 0 ? void 0 : _a.replace('/api', '')).concat(user.avatarUrl)\n                                        : user.avatarUrl)\n                                    : process.env.REACT_APP_DEFAULT_AVATAR_URL || '/img/default-avatar.svg', alt: \"Avatar\", className: styles.avatar }), _jsxs(\"div\", { className: styles.avatarActions, children: [_jsxs(\"label\", { className: styles.avatarUpload, children: [_jsx(\"svg\", { width: \"20\", height: \"20\", fill: \"none\", viewBox: \"0 0 24 24\", children: _jsx(\"path\", { d: \"M4 7a2 2 0 012-2h2.172a2 2 0 001.414-.586l.828-.828A2 2 0 0112.828 3h2.344a2 2 0 011.414.586l.828.828A2 2 0 0020 5h2a2 2 0 012 2v12a2 2 0 01-2 2H4a2 2 0 01-2-2V7zm8 3a4 4 0 100 8 4 4 0 000-8zm0 2a2 2 0 110 4 2 2 0 010-4z\", fill: \"#2563eb\" }) }), _jsx(\"input\", { type: \"file\", accept: \"image/*\", onChange: handleAvatarChange, style: { display: 'none' } })] }), user.avatarUrl && (_jsx(\"button\", { className: styles.avatarReset, onClick: handleResetAvatar, title: \"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\", children: _jsx(\"svg\", { width: \"20\", height: \"20\", fill: \"none\", viewBox: \"0 0 24 24\", children: _jsx(\"path\", { d: \"M6 18L18 6M6 6l12 12\", stroke: \"#dc3545\", strokeWidth: \"2\", strokeLinecap: \"round\" }) }) }))] })] }), _jsx(\"div\", { className: styles.greetingBlock, children: _jsx(\"div\", { className: styles.greeting, children: isEditing ? (_jsxs(\"div\", { className: styles.usernameEdit, children: [_jsx(\"input\", { type: \"text\", value: username, onChange: function (e) { return setUsername(e.target.value); }, className: styles.usernameInput, placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043C\\u044F\", autoFocus: true, onKeyDown: function (e) {\n                                            if (e.key === 'Enter') {\n                                                handleUsernameSave();\n                                            }\n                                            else if (e.key === 'Escape') {\n                                                setUsername(user.username);\n                                                setIsEditing(false);\n                                                setUpdateError(null);\n                                            }\n                                        } }), _jsxs(\"div\", { className: styles.usernameActions, children: [_jsx(\"button\", { type: \"button\", className: styles.saveButton, onClick: handleUsernameSave, children: _jsx(\"svg\", { width: \"16\", height: \"16\", fill: \"none\", viewBox: \"0 0 24 24\", children: _jsx(\"path\", { d: \"M5 13l4 4L19 7\", stroke: \"currentColor\", strokeWidth: \"2\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }) }) }), _jsx(\"button\", { type: \"button\", className: styles.cancelButton, onClick: function () {\n                                                    setUsername(user.username);\n                                                    setIsEditing(false);\n                                                    setUpdateError(null);\n                                                }, children: _jsx(\"svg\", { width: \"16\", height: \"16\", fill: \"none\", viewBox: \"0 0 24 24\", children: _jsx(\"path\", { d: \"M6 18L18 6M6 6l12 12\", stroke: \"currentColor\", strokeWidth: \"2\", strokeLinecap: \"round\" }) }) })] }), updateError && (_jsx(\"div\", { className: styles.updateError, children: updateError }))] })) : (_jsxs(_Fragment, { children: [\"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \", user.username, \"!\", _jsx(\"button\", { className: styles.editButton, onClick: function () { return setIsEditing(true); }, children: _jsxs(\"svg\", { width: \"20\", height: \"20\", fill: \"none\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M4 17.25V19a.75.75 0 00.75.75h1.75a.75.75 0 00.53-.22l9.72-9.72a.75.75 0 000-1.06l-2.25-2.25a.75.75 0 00-1.06 0l-9.72 9.72a.75.75 0 00-.22.53z\", stroke: \"#2563eb\", strokeWidth: \"2\" }), _jsx(\"path\", { d: \"M15.5 6.5l2 2\", stroke: \"#2563eb\", strokeWidth: \"2\", strokeLinecap: \"round\" })] }) })] })) }) }), _jsxs(\"div\", { className: styles.userInfo, children: [_jsxs(\"div\", { children: [\"Email: \", user.email] }), _jsxs(\"div\", { children: [\"\\u0413\\u043E\\u0440\\u043E\\u0434: \", user.city] })] }), _jsxs(\"div\", { className: styles.stats, children: [_jsxs(\"div\", { className: styles.statItem, children: [_jsx(\"div\", { className: styles.statValue, children: userTickets.length }), _jsx(\"div\", { className: styles.statLabel, children: \"\\u041A\\u0443\\u043F\\u043B\\u0435\\u043D\\u043E \\u0431\\u0438\\u043B\\u0435\\u0442\\u043E\\u0432\" })] }), _jsxs(\"div\", { className: styles.statItem, children: [_jsx(\"div\", { className: styles.statValue, children: user.favorites ? user.favorites.length : 0 }), _jsx(\"div\", { className: styles.statLabel, children: \"\\u0418\\u0437\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u0435\" })] })] }), _jsxs(\"div\", { className: styles.quickActions, children: [_jsxs(\"button\", { className: styles.quickActionBtn, type: \"button\", onClick: function () { return navigate('/my-tickets'); }, children: [_jsxs(\"svg\", { width: \"20\", height: \"20\", fill: \"none\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M4 7.5A2.5 2.5 0 016.5 5h11A2.5 2.5 0 0120 7.5v9A2.5 2.5 0 0117.5 19h-11A2.5 2.5 0 014 16.5v-9z\", stroke: \"#2563eb\", strokeWidth: \"2\" }), _jsx(\"path\", { d: \"M8 9h8M8 13h5\", stroke: \"#2563eb\", strokeWidth: \"2\", strokeLinecap: \"round\" })] }), \"\\u041C\\u043E\\u0438 \\u0431\\u0438\\u043B\\u0435\\u0442\\u044B\"] }), _jsxs(\"button\", { className: styles.quickActionBtn, type: \"button\", onClick: function () { return navigate('/my-tickets', { state: { tab: 'favorites' } }); }, children: [_jsx(\"svg\", { width: \"20\", height: \"20\", fill: \"none\", viewBox: \"0 0 24 24\", children: _jsx(\"path\", { d: \"M12 21s-7-5.686-7-10.5A5.5 5.5 0 0112 5a5.5 5.5 0 017 5.5C19 15.314 12 21 12 21z\", stroke: \"#2563eb\", strokeWidth: \"2\" }) }), \"\\u0418\\u0437\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u0435\"] }), _jsxs(\"div\", { className: styles.logoutWrapper, children: [_jsxs(\"button\", { className: styles.quickActionBtn + ' ' + styles.logoutBtn, type: \"button\", onClick: function () { return setShowLogoutConfirm(true); }, children: [_jsx(\"svg\", { width: \"20\", height: \"20\", fill: \"none\", viewBox: \"0 0 24 24\", children: _jsx(\"path\", { d: \"M6 18L18 6M6 6l12 12\", stroke: \"#2563eb\", strokeWidth: \"2\", strokeLinecap: \"round\" }) }), \"\\u0412\\u044B\\u0439\\u0442\\u0438\"] }), showLogoutConfirm && (_jsxs(\"div\", { className: styles.logoutConfirmBox, children: [_jsx(\"div\", { className: styles.logoutConfirmText, children: \"\\u0412\\u044B\\u0439\\u0442\\u0438 \\u0438\\u0437 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430?\" }), _jsxs(\"div\", { className: styles.logoutConfirmActions, children: [_jsx(\"button\", { className: styles.confirmBtn, onClick: function () { dispatch(logout()); setShowLogoutConfirm(false); }, children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\" }), _jsx(\"button\", { className: styles.cancelBtn, onClick: function () { return setShowLogoutConfirm(false); }, children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\" })] })] }))] })] })] }) }) }));\n};\nexport default ProfilePage;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_ifCH7uh\",\"tabs\":\"GbLO1eUY\",\"tab\":\"KXB6Wmqr\",\"activeTab\":\"jmziS_bF\",\"tabContent\":\"tmOnqDUR\",\"emptyStub\":\"jt9o2PT4\",\"fadeIn\":\"at1Q2F_k\",\"emptyStubIcon\":\"G9gCuTYe\",\"emptyStubText\":\"Y8ze9CgU\"};","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react';\nimport styles from './MyTicketPage.module.scss';\nimport { useAppSelector, useAppDispatch } from '@/shared/lib/hooks';\nimport EventListWidget from '@/widgets/EventListWidget/ui/EventListWidget';\nimport { fetchFavorites, fetchUserTickets, removeFavorite } from '@/features/AuthModal/model/authSlice';\nimport { fetchEvents } from '@/entities/Event/model/eventSlice';\nvar TABS = [\n    { key: 'tickets', label: 'Мои билеты' },\n    { key: 'favorites', label: 'Избранное' },\n];\nvar MyTicketsPage = function () {\n    var _a = useState('tickets'), activeTab = _a[0], setActiveTab = _a[1];\n    var dispatch = useAppDispatch();\n    var favorites = useAppSelector(function (state) { var _a; return ((_a = state.auth.user) === null || _a === void 0 ? void 0 : _a.favorites) || []; });\n    var allEvents = useAppSelector(function (state) { return state.event.events; });\n    var favoriteEvents = allEvents.filter(function (e) { return favorites.includes(e.id); }).map(function (e) { return (__assign(__assign({}, e), { isFavorite: true })); });\n    var loading = useAppSelector(function (state) { return state.auth.loading; });\n    var error = useAppSelector(function (state) { return state.auth.error; });\n    var userTickets = useAppSelector(function (state) { return state.auth.userTickets || []; });\n    // Группировка билетов по eventId\n    var groupedTickets = userTickets.reduce(function (acc, ticket) {\n        if (!acc[ticket.eventId]) {\n            acc[ticket.eventId] = __assign(__assign({}, ticket), { ticketCount: 1, ticketSeats: ticket.seat ? [ticket.seat] : [] });\n        }\n        else {\n            acc[ticket.eventId].ticketCount += 1;\n            if (ticket.seat)\n                acc[ticket.eventId].ticketSeats.push(ticket.seat);\n        }\n        return acc;\n    }, {});\n    var ticketsForWidget = Object.values(groupedTickets);\n    var handleRemoveFromFavorites = function (eventId) { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, dispatch(removeFavorite(eventId))];\n                case 1:\n                    _a.sent();\n                    dispatch(fetchFavorites());\n                    dispatch(fetchEvents({}));\n                    return [2 /*return*/];\n            }\n        });\n    }); };\n    useEffect(function () {\n        if (activeTab === 'tickets') {\n            dispatch(fetchUserTickets());\n        }\n        else if (activeTab === 'favorites') {\n            dispatch(fetchFavorites());\n            dispatch(fetchEvents({}));\n        }\n    }, [activeTab, dispatch]);\n    return (_jsxs(\"div\", { className: styles.container, children: [_jsx(\"h1\", { children: \"\\u041C\\u043E\\u0438 \\u0441\\u043E\\u0431\\u044B\\u0442\\u0438\\u044F\" }), _jsx(\"div\", { className: styles.tabs, children: TABS.map(function (tab) { return (_jsx(\"button\", { className: activeTab === tab.key ? styles.activeTab : styles.tab, onClick: function () { return setActiveTab(tab.key); }, type: \"button\", children: tab.label }, tab.key)); }) }), _jsx(\"div\", { className: styles.tabContent, children: activeTab === 'tickets' ? (ticketsForWidget.length > 0 ? (_jsx(EventListWidget, { events: ticketsForWidget.map(function (ticket) { return (__assign(__assign({}, ticket), { id: ticket.eventId, isTicket: true })); }), onAddToFavorites: function () { }, onRemoveFromFavorites: function () { }, onBuyTicket: function () { }, loading: loading, error: error })) : (_jsxs(\"div\", { className: styles.emptyStub, children: [_jsxs(\"svg\", { className: styles.emptyStubIcon, viewBox: \"0 0 48 48\", fill: \"none\", children: [_jsx(\"circle\", { cx: \"24\", cy: \"24\", r: \"22\", fill: \"#e3eaff\", stroke: \"#bfc8d6\", strokeWidth: \"2\" }), _jsx(\"path\", { d: \"M16 28c1.5-2 4.5-2 6 0s4.5 2 6 0\", stroke: \"#bfc8d6\", strokeWidth: \"2\", strokeLinecap: \"round\" }), _jsx(\"circle\", { cx: \"18\", cy: \"20\", r: \"2\", fill: \"#bfc8d6\" }), _jsx(\"circle\", { cx: \"30\", cy: \"20\", r: \"2\", fill: \"#bfc8d6\" })] }), _jsx(\"div\", { className: styles.emptyStubText, children: \"\\u0423 \\u0432\\u0430\\u0441 \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442 \\u043A\\u0443\\u043F\\u043B\\u0435\\u043D\\u043D\\u044B\\u0445 \\u0431\\u0438\\u043B\\u0435\\u0442\\u043E\\u0432\" })] }))) : (favoriteEvents.length > 0 ? (_jsx(EventListWidget, { events: favoriteEvents, onAddToFavorites: function () { }, onRemoveFromFavorites: handleRemoveFromFavorites, onBuyTicket: function () { }, loading: loading, error: error })) : (_jsxs(\"div\", { className: styles.emptyStub, children: [_jsxs(\"svg\", { className: styles.emptyStubIcon, viewBox: \"0 0 48 48\", fill: \"none\", children: [_jsx(\"circle\", { cx: \"24\", cy: \"24\", r: \"22\", fill: \"#e3eaff\", stroke: \"#bfc8d6\", strokeWidth: \"2\" }), _jsx(\"path\", { d: \"M16 28c1.5-2 4.5-2 6 0s4.5 2 6 0\", stroke: \"#bfc8d6\", strokeWidth: \"2\", strokeLinecap: \"round\" }), _jsx(\"circle\", { cx: \"18\", cy: \"20\", r: \"2\", fill: \"#bfc8d6\" }), _jsx(\"circle\", { cx: \"30\", cy: \"20\", r: \"2\", fill: \"#bfc8d6\" })] }), _jsx(\"div\", { className: styles.emptyStubText, children: \"\\u0423 \\u0432\\u0430\\u0441 \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442 \\u0438\\u0437\\u0431\\u0440\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0441\\u043E\\u0431\\u044B\\u0442\\u0438\\u0439\" })] }))) })] }));\n};\nexport default MyTicketsPage;\n","// extracted by mini-css-extract-plugin\nexport default {\"legend\":\"QqPd0FV8\",\"legendItem\":\"ygmSVDPC\",\"legendBoxFree\":\"vYb5nAxP\",\"legendBoxSelected\":\"toGfKC32\",\"legendBoxBooked\":\"SSv0sTVP\",\"sceneLabel\":\"YhXIRch9\",\"grid\":\"WHOT3LXd\",\"gridRow\":\"PruI0fUR\",\"seatButton\":\"zYG7EdKs\",\"selected\":\"WmjPp9x0\",\"booked\":\"UUCZc1Kq\",\"circleWrapper\":\"uFc_SGIy\",\"nextButton\":\"_CzGfsWr\",\"prevButton\":\"D8AVbEZe\",\"selectedInfo\":\"VebIyXBU\",\"maxInfo\":\"LIVnYT_e\"};","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useEffect, useState } from 'react';\nimport { eventAPI } from '@/shared/api/api';\nexport var MAX_SELECT = 10;\nexport function useChooseSeat(eventId) {\n    var _a = useState([]), bookedSeats = _a[0], setBookedSeats = _a[1];\n    var _b = useState([]), selectedSeats = _b[0], setSelectedSeats = _b[1];\n    var _c = useState(true), loading = _c[0], setLoading = _c[1];\n    var _d = useState(null), error = _d[0], setError = _d[1];\n    useEffect(function () {\n        setLoading(true);\n        eventAPI.getBookedSeats(Number(eventId))\n            .then(function (seats) { return setBookedSeats(seats); })\n            .catch(function () { return setError('Ошибка загрузки мест'); })\n            .finally(function () { return setLoading(false); });\n    }, [eventId]);\n    var handleSelect = function (seat) {\n        if (bookedSeats.includes(seat))\n            return;\n        if (selectedSeats.includes(seat)) {\n            setSelectedSeats(selectedSeats.filter(function (s) { return s !== seat; }));\n        }\n        else if (selectedSeats.length < MAX_SELECT) {\n            setSelectedSeats(__spreadArray(__spreadArray([], selectedSeats, true), [seat], false));\n        }\n    };\n    return {\n        bookedSeats: bookedSeats,\n        selectedSeats: selectedSeats,\n        setSelectedSeats: setSelectedSeats,\n        loading: loading,\n        error: error,\n        handleSelect: handleSelect,\n    };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"wn8Rbeuu\",\"title\":\"uxj2vNEo\"};","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport styles from './StepContainer.module.scss';\nvar StepContainer = function (_a) {\n    var children = _a.children, title = _a.title;\n    return (_jsxs(\"div\", { className: styles.container, children: [_jsx(\"h2\", { className: styles.title, children: title }), children] }));\n};\nexport default StepContainer;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"sBznJJGu\",\"nextButton\":\"E6LfH8_L\",\"backButton\":\"I6sh7HV8\"};","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport styles from './StepButtons.module.scss';\nvar StepButtons = function (_a) {\n    var onNext = _a.onNext, onBack = _a.onBack, _b = _a.nextText, nextText = _b === void 0 ? 'Далее' : _b, _c = _a.isNextDisabled, isNextDisabled = _c === void 0 ? false : _c, _d = _a.isLoading, isLoading = _d === void 0 ? false : _d;\n    return (_jsxs(\"div\", { className: styles.container, children: [onBack && (_jsx(\"button\", { type: \"button\", onClick: onBack, className: styles.backButton, children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\" })), _jsx(\"button\", { type: nextText === 'Далее' ? 'button' : 'submit', onClick: nextText === 'Далее' ? onNext : undefined, disabled: isNextDisabled || isLoading, className: styles.nextButton, children: isLoading ? 'Загрузка...' : nextText })] }));\n};\nexport default StepButtons;\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport React from 'react';\nimport styles from './StepChooseSeat.module.scss';\nimport { useChooseSeat, MAX_SELECT } from '../model/useChooseSeat';\nimport StepContainer from './common/StepContainer';\nimport StepButtons from './common/StepButtons';\nvar SECTOR_GAP = 6; // зазор между секторами в градусах\nvar SECTORS = [\n    { name: 'A', color: '#ffe066', startAngle: 225 + SECTOR_GAP / 2, endAngle: 315 - SECTOR_GAP / 2 }, // низ\n    { name: 'B', color: '#5eb3fa', startAngle: 135 + SECTOR_GAP / 2, endAngle: 225 - SECTOR_GAP / 2 }, // лево\n    { name: 'C', color: '#f7a6c7', startAngle: 45 + SECTOR_GAP / 2, endAngle: 135 - SECTOR_GAP / 2 }, // верх\n    { name: 'D', color: '#8fd18f', startAngle: -45 + SECTOR_GAP / 2, endAngle: 45 - SECTOR_GAP / 2 }, // право\n];\nvar ROWS = 5;\nvar SEATS_PER_ROW = 7;\nvar SEAT_SIZE = 18;\nvar RADIUS_STEP = 32;\nvar StepChooseSeat = function (_a) {\n    var eventId = _a.eventId, onNext = _a.onNext, onBack = _a.onBack, _b = _a.seatingType, seatingType = _b === void 0 ? 'grid' : _b, _c = _a.initialSeats, initialSeats = _c === void 0 ? null : _c;\n    var _d = useChooseSeat(eventId), bookedSeats = _d.bookedSeats, selectedSeats = _d.selectedSeats, setSelectedSeats = _d.setSelectedSeats, loading = _d.loading, error = _d.error, handleSelect = _d.handleSelect;\n    // Устанавливаем начальные значения при монтировании\n    React.useEffect(function () {\n        if (initialSeats) {\n            setSelectedSeats(initialSeats);\n        }\n    }, []);\n    var handleNext = function () {\n        if (selectedSeats.length > 0)\n            onNext(selectedSeats);\n    };\n    if (loading)\n        return _jsx(\"div\", { children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0441\\u0445\\u0435\\u043C\\u044B \\u0437\\u0430\\u043B\\u0430...\" });\n    if (error)\n        return _jsx(\"div\", { style: { color: 'red' }, children: error });\n    return (_jsxs(StepContainer, { title: \"\\u0412\\u044B\\u0431\\u043E\\u0440 \\u043C\\u0435\\u0441\\u0442\", children: [_jsxs(\"div\", { className: styles.legend, children: [_jsxs(\"span\", { className: styles.legendItem, children: [_jsx(\"span\", { className: styles.legendBoxFree }), \" \\u0441\\u0432\\u043E\\u0431\\u043E\\u0434\\u043D\\u043E\"] }), _jsxs(\"span\", { className: styles.legendItem, children: [_jsx(\"span\", { className: styles.legendBoxSelected }), \" \\u0432\\u044B\\u0431\\u0440\\u0430\\u043D\\u043E\"] }), _jsxs(\"span\", { className: styles.legendItem, children: [_jsx(\"span\", { className: styles.legendBoxBooked }), \" \\u0437\\u0430\\u043D\\u044F\\u0442\\u043E\"] })] }), seatingType === 'grid' && (_jsxs(_Fragment, { children: [_jsx(\"div\", { className: styles.sceneLabel, children: \"\\u0421\\u0446\\u0435\\u043D\\u0430\" }), _jsx(\"div\", { className: styles.grid, children: Array.from({ length: 5 }).map(function (_, rowIdx) { return (_jsx(\"div\", { className: styles.gridRow, children: Array.from({ length: 8 }).map(function (_, seatIdx) {\n                                var seat = \"\".concat(String.fromCharCode(65 + rowIdx)).concat(seatIdx + 1);\n                                var isBooked = bookedSeats.includes(seat);\n                                var isSelected = selectedSeats.includes(seat);\n                                return (_jsx(\"button\", { disabled: isBooked, className: [\n                                        styles.seatButton,\n                                        isSelected ? styles.selected : '',\n                                        isBooked ? styles.booked : '',\n                                    ].join(' '), onClick: function () { return handleSelect(seat); }, title: isBooked ? 'Место занято' : \"\\u041C\\u0435\\u0441\\u0442\\u043E \".concat(seat), \"aria-label\": \"\\u041C\\u0435\\u0441\\u0442\\u043E \".concat(seat).concat(isBooked ? ' (занято)' : isSelected ? ' (выбрано)' : ''), children: seat }, seat));\n                            }) }, rowIdx)); }) })] })), seatingType === 'circle' && (_jsx(\"div\", { className: styles.circleWrapper, children: _jsxs(\"svg\", { width: 600, height: 600, viewBox: \"0 0 600 600\", style: { background: '#f8fafd', borderRadius: '8px', boxShadow: '0 2px 16px #2563eb11' }, children: [_jsx(\"rect\", { x: 200, y: 220, width: 200, height: 160, rx: 30, fill: \"#bfe6ff\", stroke: \"#222\", strokeWidth: 2 }), _jsx(\"rect\", { x: 200, y: 220, width: 200, height: 160, rx: 30, fill: \"none\", stroke: \"#222\", strokeWidth: 2 }), _jsx(\"text\", { x: 300, y: 305, textAnchor: \"middle\", fill: \"#222\", fontSize: 32, fontWeight: 700, children: \"\\u041F\\u043E\\u043B\\u0435\" }), SECTORS.map(function (sector, sectorIdx) {\n                            var sectorAngle = sector.endAngle - sector.startAngle;\n                            var seatNum = 1;\n                            return (_jsxs(\"g\", { children: [_jsx(\"text\", { x: 300 + 220 * Math.cos(((sector.startAngle + sector.endAngle) / 2) * Math.PI / 180), y: 300 + 220 * Math.sin(((sector.startAngle + sector.endAngle) / 2) * Math.PI / 180), textAnchor: \"middle\", fontSize: 28, fontWeight: 700, fill: sector.color, opacity: 0.7, children: sector.name }), Array.from({ length: ROWS }).map(function (_, rowIdx) {\n                                        var radius = 140 + rowIdx * RADIUS_STEP;\n                                        return Array.from({ length: SEATS_PER_ROW }).map(function (_, seatIdx) {\n                                            var angle = sector.startAngle + (sectorAngle / (SEATS_PER_ROW - 1)) * seatIdx;\n                                            var rad = angle * Math.PI / 180;\n                                            var x = 300 + radius * Math.cos(rad);\n                                            var y = 300 + radius * Math.sin(rad);\n                                            var seat = \"\".concat(sector.name).concat(seatNum++);\n                                            var isBooked = bookedSeats.includes(seat);\n                                            var isSelected = selectedSeats.includes(seat);\n                                            return (_jsxs(\"g\", { style: { cursor: isBooked ? 'not-allowed' : 'pointer' }, onClick: function () { return handleSelect(seat); }, children: [_jsx(\"rect\", { x: x - SEAT_SIZE / 2, y: y - SEAT_SIZE / 2, width: SEAT_SIZE, height: SEAT_SIZE, rx: 4, fill: isBooked ? '#ccc' : isSelected ? '#2563eb' : sector.color, stroke: isSelected ? '#2563eb' : '#bbb', strokeWidth: isSelected ? 2 : 1, style: { filter: isSelected ? 'drop-shadow(0 0 8px #2563eb55)' : undefined, transition: 'all 0.15s' } }), _jsx(\"text\", { x: x, y: y + 4, textAnchor: \"middle\", fontSize: 10, fontWeight: isSelected ? 700 : 400, fill: isBooked ? '#888' : isSelected ? '#fff' : '#222', pointerEvents: \"none\", children: seat })] }, seat));\n                                        });\n                                    })] }, sector.name));\n                        })] }) })), selectedSeats.length > 0 && _jsxs(\"div\", { className: styles.selectedInfo, children: [\"\\u0412\\u044B \\u0432\\u044B\\u0431\\u0440\\u0430\\u043B\\u0438 \\u043C\\u0435\\u0441\\u0442\\u0430: \", _jsx(\"b\", { children: selectedSeats.join(', ') })] }), selectedSeats.length === MAX_SELECT && _jsxs(\"div\", { className: styles.maxInfo, children: [\"\\u041C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0443\\u043C \", MAX_SELECT, \" \\u043C\\u0435\\u0441\\u0442 \\u0437\\u0430 \\u043E\\u0434\\u043D\\u0443 \\u043F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0443\"] }), _jsx(StepButtons, { onNext: handleNext, onBack: onBack, isNextDisabled: selectedSeats.length === 0 })] }));\n};\nexport default StepChooseSeat;\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"JQaenamU\",\"title\":\"fYD3qzzd\",\"label\":\"Zi8nICeP\",\"inputWrapper\":\"Bhrkreat\",\"input\":\"Vnk97CON\",\"inputError\":\"iobB8wwB\",\"icon\":\"KrJ3p76Z\",\"error\":\"ARR7gWgw\",\"nextButton\":\"CHSuyWXX\",\"prevButton\":\"eowmllqz\"};","import { useState } from 'react';\nexport function validateEmail(email) {\n    return /.+@.+\\..+/.test(email);\n}\nexport function validatePhone(phone) {\n    return /^\\+?\\d{10,15}$/.test(phone.replace(/\\D/g, ''));\n}\nexport function useUserData(initialEmail) {\n    var _a = useState(''), name = _a[0], setName = _a[1];\n    var _b = useState(''), phone = _b[0], setPhone = _b[1];\n    var _c = useState(initialEmail), email = _c[0], setEmail = _c[1];\n    var _d = useState({}), touched = _d[0], setTouched = _d[1];\n    var isValid = name.trim().length > 2 && validatePhone(phone) && validateEmail(email);\n    return {\n        name: name,\n        setName: setName,\n        phone: phone,\n        setPhone: setPhone,\n        email: email,\n        setEmail: setEmail,\n        touched: touched,\n        setTouched: setTouched,\n        isValid: isValid\n    };\n}\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React from 'react';\nimport styles from './StepUserData.module.scss';\nimport { useUserData, validateEmail, validatePhone } from '../model/useUserData';\nimport StepContainer from './common/StepContainer';\nimport StepButtons from './common/StepButtons';\nvar StepUserData = function (_a) {\n    var initialEmail = _a.initialEmail, initialData = _a.initialData, onNext = _a.onNext, onBack = _a.onBack;\n    var _b = useUserData((initialData === null || initialData === void 0 ? void 0 : initialData.email) || initialEmail), name = _b.name, setName = _b.setName, phone = _b.phone, setPhone = _b.setPhone, email = _b.email, setEmail = _b.setEmail, touched = _b.touched, setTouched = _b.setTouched, isValid = _b.isValid;\n    // Устанавливаем начальные значения при монтировании\n    React.useEffect(function () {\n        if (initialData) {\n            setName(initialData.name);\n            setPhone(initialData.phone);\n            setEmail(initialData.email);\n        }\n    }, []);\n    var handleSubmit = function (e) {\n        e.preventDefault();\n        if (isValid) {\n            onNext({ name: name, phone: phone, email: email });\n        }\n    };\n    return (_jsx(StepContainer, { title: \"\\u0412\\u0430\\u0448\\u0438 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\", children: _jsxs(\"form\", { className: styles.form, onSubmit: handleSubmit, autoComplete: \"off\", children: [_jsxs(\"label\", { className: styles.label, children: [_jsx(\"span\", { style: { marginBottom: 2 }, children: \"\\u0424\\u0418\\u041E\" }), _jsxs(\"div\", { className: styles.inputWrapper, children: [_jsx(\"input\", { value: name, onChange: function (e) { return setName(e.target.value); }, onBlur: function () { return setTouched(function (t) { return (__assign(__assign({}, t), { name: true })); }); }, placeholder: \"\\u0418\\u0432\\u0430\\u043D\\u043E\\u0432 \\u0418\\u0432\\u0430\\u043D \\u0418\\u0432\\u0430\\u043D\\u043E\\u0432\\u0438\\u0447\", className: [\n                                        styles.input,\n                                        touched.name && name.trim().length < 3 ? styles.inputError : ''\n                                    ].join(' '), autoComplete: \"off\" }), _jsx(\"span\", { className: styles.icon, children: \"\\uD83D\\uDC64\" })] }), touched.name && name.trim().length < 3 && _jsx(\"span\", { className: styles.error, children: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u0438\\u043C\\u044F\" })] }), _jsxs(\"label\", { className: styles.label, children: [_jsx(\"span\", { style: { marginBottom: 2 }, children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\" }), _jsxs(\"div\", { className: styles.inputWrapper, children: [_jsx(\"input\", { value: phone, onChange: function (e) { return setPhone(e.target.value); }, onBlur: function () { return setTouched(function (t) { return (__assign(__assign({}, t), { phone: true })); }); }, placeholder: \"+79991234567\", className: [\n                                        styles.input,\n                                        touched.phone && !validatePhone(phone) ? styles.inputError : ''\n                                    ].join(' '), autoComplete: \"off\" }), _jsx(\"span\", { className: styles.icon, children: \"\\uD83D\\uDCF1\" })] }), touched.phone && !validatePhone(phone) && _jsx(\"span\", { className: styles.error, children: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u044B\\u0439 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\" })] }), _jsxs(\"label\", { className: styles.label, children: [_jsx(\"span\", { style: { marginBottom: 2 }, children: \"Email\" }), _jsxs(\"div\", { className: styles.inputWrapper, children: [_jsx(\"input\", { value: email, onChange: function (e) { return setEmail(e.target.value); }, onBlur: function () { return setTouched(function (t) { return (__assign(__assign({}, t), { email: true })); }); }, placeholder: \"email@example.com\", className: [\n                                        styles.input,\n                                        touched.email && !validateEmail(email) ? styles.inputError : ''\n                                    ].join(' '), autoComplete: \"off\" }), _jsx(\"span\", { className: styles.icon, children: \"\\u2709\\uFE0F\" })] }), touched.email && !validateEmail(email) && _jsx(\"span\", { className: styles.error, children: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u044B\\u0439 email\" })] }), _jsx(StepButtons, { onNext: function () {\n                        if (isValid) {\n                            onNext({ name: name, phone: phone, email: email });\n                        }\n                    }, onBack: onBack, isNextDisabled: !isValid, nextText: \"\\u0414\\u0430\\u043B\\u0435\\u0435\" })] }) }));\n};\nexport default StepUserData;\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"QycDKdvc\",\"title\":\"LDOLPptO\",\"summary\":\"HtnMLkF8\",\"eventTitle\":\"Du3sS5fC\",\"amount\":\"ZTOixN9M\",\"label\":\"uiyLXLFg\",\"input\":\"KwwEtING\",\"inputError\":\"FF04EcMe\",\"error\":\"GkJb6cu3\",\"row\":\"DWwNWj5V\",\"secure\":\"Pf0xbG7E\",\"secureIcon\":\"Y0dVczYb\",\"payButton\":\"cPGPhgF0\",\"prevButton\":\"ChaCUGzt\"};","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport styles from './StepPayment.module.scss';\nimport { usePayment } from '../model/usePayment';\nvar StepPayment = function (_a) {\n    var eventTitle = _a.eventTitle, amount = _a.amount, onPay = _a.onPay, loading = _a.loading, onBack = _a.onBack;\n    var _b = usePayment(), card = _b.card, setCard = _b.setCard, date = _b.date, setDate = _b.setDate, cvv = _b.cvv, setCvv = _b.setCvv, touched = _b.touched, setTouched = _b.setTouched, dateRef = _b.dateRef, cvvRef = _b.cvvRef, formatCardNumber = _b.formatCardNumber, isCardValid = _b.isCardValid, isDateValid = _b.isDateValid, isCvvValid = _b.isCvvValid, isValid = _b.isValid;\n    return (_jsxs(\"form\", { className: styles.form, onSubmit: function (e) { e.preventDefault(); if (isValid && !loading)\n            onPay(); }, autoComplete: \"off\", children: [_jsx(\"h2\", { className: styles.title, children: \"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0430 \\u0431\\u0438\\u043B\\u0435\\u0442\\u0430\" }), _jsxs(\"div\", { className: styles.summary, children: [_jsx(\"div\", { className: styles.eventTitle, children: eventTitle }), _jsxs(\"div\", { className: styles.amount, children: [\"\\u0421\\u0443\\u043C\\u043C\\u0430 \\u043A \\u043E\\u043F\\u043B\\u0430\\u0442\\u0435: \", _jsxs(\"b\", { children: [amount, \" \\u20BD\"] })] })] }), _jsxs(\"label\", { className: styles.label, children: [_jsx(\"span\", { children: \"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u043A\\u0430\\u0440\\u0442\\u044B\" }), _jsx(\"input\", { value: card, onChange: function (e) {\n                            var raw = e.target.value.replace(/[^\\d ]/g, '');\n                            setCard(raw);\n                            if (raw.replace(/\\s/g, '').length === 16 && dateRef.current) {\n                                dateRef.current.focus();\n                            }\n                        }, onBlur: function (e) {\n                            setTouched(function (t) { return (__assign(__assign({}, t), { card: true })); });\n                            setCard(formatCardNumber(e.target.value));\n                        }, placeholder: \"0000 0000 0000 0000\", maxLength: 19, className: [styles.input, touched.card && !isCardValid ? styles.inputError : ''].join(' ') }), touched.card && !isCardValid && _jsx(\"span\", { className: styles.error, children: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 16 \\u0446\\u0438\\u0444\\u0440\" })] }), _jsxs(\"div\", { className: styles.row, children: [_jsxs(\"label\", { className: styles.label, style: { flex: 1 }, children: [_jsx(\"span\", { children: \"\\u0421\\u0440\\u043E\\u043A\" }), _jsx(\"input\", { ref: dateRef, value: date, onChange: function (e) {\n                                    var val = e.target.value.replace(/[^\\d/]/g, '');\n                                    if (val.length === 2 && date.length === 1)\n                                        val += '/';\n                                    if (val.length > 5)\n                                        val = val.slice(0, 5);\n                                    setDate(val);\n                                    if (/^\\d{2}\\/\\d{2}$/.test(val) && isDateValid && cvvRef.current) {\n                                        cvvRef.current.focus();\n                                    }\n                                }, onBlur: function () { return setTouched(function (t) { return (__assign(__assign({}, t), { date: true })); }); }, placeholder: \"MM/YY\", maxLength: 5, className: [styles.input, touched.date && !isDateValid ? styles.inputError : ''].join(' ') }), touched.date && !isDateValid && _jsx(\"span\", { className: styles.error, children: \"\\u041C\\u0435\\u0441\\u044F\\u0446/\\u0433\\u043E\\u0434 \\u043D\\u0435\\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u044B\" })] }), _jsxs(\"label\", { className: styles.label, style: { flex: 1 }, children: [_jsx(\"span\", { children: \"CVV\" }), _jsx(\"input\", { ref: cvvRef, value: cvv, onChange: function (e) {\n                                    var val = e.target.value.replace(/[^\\d]/g, '').slice(0, 3);\n                                    setCvv(val);\n                                }, onBlur: function () { return setTouched(function (t) { return (__assign(__assign({}, t), { cvv: true })); }); }, placeholder: \"123\", maxLength: 3, className: [styles.input, touched.cvv && !isCvvValid ? styles.inputError : ''].join(' '), type: \"password\" }), touched.cvv && !isCvvValid && _jsx(\"span\", { className: styles.error, children: \"3 \\u0446\\u0438\\u0444\\u0440\\u044B\" })] })] }), _jsxs(\"div\", { className: styles.secure, children: [_jsx(\"span\", { className: styles.secureIcon, children: \"\\uD83D\\uDD12\" }), \" \\u041F\\u043B\\u0430\\u0442\\u0451\\u0436 \\u0437\\u0430\\u0449\\u0438\\u0449\\u0451\\u043D\"] }), _jsxs(\"div\", { style: { display: 'flex', gap: 8, marginTop: 8 }, children: [onBack && (_jsx(\"button\", { type: \"button\", onClick: onBack, className: styles.prevButton, children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\" })), _jsx(\"button\", { type: \"submit\", disabled: !isValid || loading, className: styles.payButton, children: loading ? 'Оплата...' : 'Оплатить' })] })] }));\n};\nexport default StepPayment;\n","import { useState, useRef } from 'react';\nexport function usePayment() {\n    var _a = useState(''), card = _a[0], setCard = _a[1];\n    var _b = useState(''), date = _b[0], setDate = _b[1];\n    var _c = useState(''), cvv = _c[0], setCvv = _c[1];\n    var _d = useState({}), touched = _d[0], setTouched = _d[1];\n    var dateRef = useRef(null);\n    var cvvRef = useRef(null);\n    // Форматирование номера карты в группы по 4 цифры\n    var formatCardNumber = function (value) { return value.replace(/\\D/g, '').replace(/(.{4})/g, '$1 ').trim(); };\n    // Валидация\n    var isCardValid = card.replace(/\\s/g, '').length === 16;\n    var isDateValid = /^\\d{2}\\/\\d{2}$/.test(date) && (function () {\n        var _a = date.split('/').map(Number), mm = _a[0], yy = _a[1];\n        if (mm < 1 || mm > 12)\n            return false;\n        var now = new Date();\n        var year = 2000 + yy;\n        var thisYear = now.getFullYear();\n        var thisMonth = now.getMonth() + 1;\n        return year > thisYear || (year === thisYear && mm >= thisMonth);\n    })();\n    var isCvvValid = /^\\d{3}$/.test(cvv);\n    var isValid = isCardValid && isDateValid && isCvvValid;\n    return {\n        card: card,\n        setCard: setCard,\n        date: date,\n        setDate: setDate,\n        cvv: cvv,\n        setCvv: setCvv,\n        touched: touched,\n        setTouched: setTouched,\n        dateRef: dateRef,\n        cvvRef: cvvRef,\n        formatCardNumber: formatCardNumber,\n        isCardValid: isCardValid,\n        isDateValid: isDateValid,\n        isCvvValid: isCvvValid,\n        isValid: isValid\n    };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"QWTwTtq2\",\"emoji\":\"Ap76OYc5\",\"title\":\"H_ripnUi\",\"summary\":\"oJ9ZfkGY\",\"eventTitle\":\"K2qtJgrt\",\"info\":\"WLR0Uhe3\",\"buttonPrimary\":\"mvIixGhh\",\"buttonSecondary\":\"ULuQsCua\",\"thankYou\":\"Kbs3XE4F\"};","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport styles from './StepSuccess.module.scss';\nvar StepSuccess = function (_a) {\n    var eventTitle = _a.eventTitle, places = _a.places, count = _a.count, onGoToTickets = _a.onGoToTickets, onGoHome = _a.onGoHome;\n    return (_jsxs(\"div\", { className: styles.container, children: [_jsx(\"div\", { className: styles.emoji, children: \"\\uD83C\\uDF89\" }), _jsx(\"h2\", { className: styles.title, children: \"\\u041F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0430 \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u0430!\" }), _jsxs(\"div\", { className: styles.summary, children: [_jsx(\"div\", { className: styles.eventTitle, children: eventTitle }), places && places.length > 0 && (_jsxs(\"div\", { className: styles.info, children: [\"\\u041C\\u0435\\u0441\\u0442\\u0430: \", places.join(', ')] })), count && (_jsxs(\"div\", { className: styles.info, children: [\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E: \", count] }))] }), _jsx(\"button\", { onClick: onGoToTickets, className: styles.buttonPrimary, children: \"\\u041C\\u043E\\u0438 \\u0431\\u0438\\u043B\\u0435\\u0442\\u044B\" }), _jsx(\"button\", { onClick: onGoHome, className: styles.buttonSecondary, children: \"\\u041D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E\" }), _jsx(\"div\", { className: styles.thankYou, children: \"\\u0421\\u043F\\u0430\\u0441\\u0438\\u0431\\u043E \\u0437\\u0430 \\u043F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0443! \\u0416\\u0435\\u043B\\u0430\\u0435\\u043C \\u043F\\u0440\\u0438\\u044F\\u0442\\u043D\\u043E\\u0433\\u043E \\u043F\\u043E\\u0441\\u0435\\u0449\\u0435\\u043D\\u0438\\u044F \\uD83C\\uDFAB\" })] }));\n};\nexport default StepSuccess;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"KRgYyAkC\",\"title\":\"UvC5zJGM\",\"counterRow\":\"PFCYxcZh\",\"button\":\"sOnqGhiS\",\"input\":\"iKocadxu\",\"nextButton\":\"Skout7_x\",\"prevButton\":\"yLEcsvHT\",\"hint\":\"NGZsBkju\"};","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport styles from './StepChooseCount.module.scss';\nimport { useChooseCount, MAX_COUNT } from '../model/useChooseCount';\nimport StepContainer from './common/StepContainer';\nimport StepButtons from './common/StepButtons';\nvar StepChooseCount = function (_a) {\n    var onNext = _a.onNext, onBack = _a.onBack, _b = _a.initialCount, initialCount = _b === void 0 ? 1 : _b;\n    var _c = useChooseCount(initialCount), count = _c.count, decrement = _c.decrement, increment = _c.increment, setCount = _c.setCount;\n    return (_jsxs(StepContainer, { title: \"\\u0412\\u044B\\u0431\\u043E\\u0440 \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u0430 \\u0431\\u0438\\u043B\\u0435\\u0442\\u043E\\u0432\", children: [_jsxs(\"div\", { className: styles.counterRow, children: [_jsx(\"button\", { onClick: decrement, disabled: count === 1, className: styles.button, \"aria-label\": \"\\u0423\\u043C\\u0435\\u043D\\u044C\\u0448\\u0438\\u0442\\u044C \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\", children: \"-\" }), _jsx(\"input\", { type: \"number\", min: 1, max: MAX_COUNT, value: count, onChange: function (e) { return setCount(Number(e.target.value)); }, className: styles.input, \"aria-label\": \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0431\\u0438\\u043B\\u0435\\u0442\\u043E\\u0432\" }), _jsx(\"button\", { onClick: increment, disabled: count === MAX_COUNT, className: styles.button, \"aria-label\": \"\\u0423\\u0432\\u0435\\u043B\\u0438\\u0447\\u0438\\u0442\\u044C \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\", children: \"+\" })] }), _jsxs(\"div\", { className: styles.hint, children: [\"\\u041C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0443\\u043C \", MAX_COUNT, \" \\u0431\\u0438\\u043B\\u0435\\u0442\\u043E\\u0432 \\u0437\\u0430 \\u043E\\u0434\\u043D\\u0443 \\u043F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0443\"] }), _jsx(StepButtons, { onNext: function () { return onNext(count); }, onBack: onBack })] }));\n};\nexport default StepChooseCount;\n","import { useState } from 'react';\nexport var MAX_COUNT = 10;\nexport function useChooseCount(initialCount) {\n    if (initialCount === void 0) { initialCount = 1; }\n    var _a = useState(initialCount), count = _a[0], setCount = _a[1];\n    var decrement = function () { return setCount(function (c) { return Math.max(1, c - 1); }); };\n    var increment = function () { return setCount(function (c) { return Math.min(MAX_COUNT, c + 1); }); };\n    var setSafeCount = function (value) { return setCount(Math.max(1, Math.min(MAX_COUNT, value))); };\n    return { count: count, setCount: setSafeCount, decrement: decrement, increment: increment };\n}\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect } from 'react';\nvar bgColors = {\n    success: '#4BB543',\n    error: '#e74c3c',\n    info: '#2563eb',\n};\nvar Toast = function (_a) {\n    var message = _a.message, _b = _a.type, type = _b === void 0 ? 'info' : _b, onClose = _a.onClose, _c = _a.duration, duration = _c === void 0 ? 3000 : _c;\n    useEffect(function () {\n        var timer = setTimeout(onClose, duration);\n        return function () { return clearTimeout(timer); };\n    }, [onClose, duration]);\n    return (_jsxs(\"div\", { style: {\n            position: 'fixed',\n            top: 24,\n            right: 24,\n            zIndex: 9999,\n            background: bgColors[type],\n            color: '#fff',\n            padding: '14px 28px',\n            borderRadius: 8,\n            fontSize: 17,\n            fontWeight: 600,\n            boxShadow: '0 4px 16px #0002',\n            minWidth: 220,\n            display: 'flex',\n            alignItems: 'center',\n            gap: 12,\n            animation: 'toast-in 0.3s',\n        }, children: [type === 'success' && _jsx(\"span\", { style: { fontSize: 22 }, children: \"\\u2714\\uFE0F\" }), type === 'error' && _jsx(\"span\", { style: { fontSize: 22 }, children: \"\\u274C\" }), type === 'info' && _jsx(\"span\", { style: { fontSize: 22 }, children: \"\\u2139\\uFE0F\" }), _jsx(\"span\", { children: message }), _jsx(\"button\", { onClick: onClose, style: { marginLeft: 'auto', background: 'none', border: 'none', color: '#fff', fontSize: 20, cursor: 'pointer' }, children: \"\\u00D7\" }), _jsx(\"style\", { children: \"\\n        @keyframes toast-in { from { opacity: 0; transform: translateY(-20px);} to { opacity: 1; transform: none;}}\\n      \" })] }));\n};\nexport default Toast;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { buyTicket, fetchUserTickets } from '@/features/AuthModal/model/authSlice';\nimport { eventAPI } from '@/shared/api/api';\nimport StepChooseSeat from '@/features/BuyTicket/ui/StepChooseSeat';\nimport StepUserData from '@/features/BuyTicket/ui/StepUserData';\nimport StepPayment from '@/features/BuyTicket/ui/StepPayment';\nimport StepSuccess from '@/features/BuyTicket/ui/StepSuccess';\nimport StepChooseCount from '@/features/BuyTicket/ui/StepChooseCount';\nimport Toast from '@/shared/ui/Toast';\nvar BuyTicketPage = function () {\n    var _a = useParams().eventId, eventId = _a === void 0 ? '' : _a;\n    var navigate = useNavigate();\n    var dispatch = useDispatch();\n    var userEmail = useSelector(function (state) { var _a; return ((_a = state.auth.user) === null || _a === void 0 ? void 0 : _a.email) || ''; });\n    var _b = useState(0), step = _b[0], setStep = _b[1];\n    var _c = useState({\n        count: 1,\n        seat: null,\n        userData: null\n    }), formData = _c[0], setFormData = _c[1];\n    var _d = useState(false), loading = _d[0], setLoading = _d[1];\n    var _e = useState(null), error = _e[0], setError = _e[1];\n    var _f = useState(null), event = _f[0], setEvent = _f[1];\n    var _g = useState(true), eventLoading = _g[0], setEventLoading = _g[1];\n    var _h = useState(null), eventError = _h[0], setEventError = _h[1];\n    var _j = useState(null), toast = _j[0], setToast = _j[1];\n    useEffect(function () {\n        setEventLoading(true);\n        eventAPI.getById(Number(eventId))\n            .then(setEvent)\n            .catch(function () { return setEventError('Ошибка загрузки события'); })\n            .finally(function () { return setEventLoading(false); });\n    }, [eventId]);\n    var steps = [];\n    var nextStep = function () {\n        setError(null);\n        setStep(step + 1);\n    };\n    var prevStep = function () {\n        setError(null);\n        setStep(step - 1);\n    };\n    if (eventLoading)\n        return _jsx(\"div\", { children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0441\\u043E\\u0431\\u044B\\u0442\\u0438\\u044F...\" });\n    if (eventError || !event)\n        return _jsx(\"div\", { style: { color: 'red' }, children: eventError || 'Событие не найдено' });\n    // Показываем шаги в зависимости от типа рассадки\n    if (event.seatingType === 'grid' || event.seatingType === 'circle') {\n        steps.push(_jsx(StepChooseSeat, { eventId: eventId, seatingType: event.seatingType, onNext: function (chosenSeats) {\n                setFormData(function (prev) { return (__assign(__assign({}, prev), { seat: chosenSeats })); });\n                nextStep();\n            }, onBack: step > 0 ? prevStep : undefined, initialSeats: formData.seat }, \"choose-seat\"));\n    }\n    else if (event.seatingType === 'none') {\n        steps.push(_jsx(StepChooseCount, { onNext: function (selectedCount) {\n                setFormData(function (prev) { return (__assign(__assign({}, prev), { count: selectedCount, seat: null })); });\n                nextStep();\n            }, onBack: step > 0 ? prevStep : undefined, initialCount: formData.count }, \"choose-count\"));\n    }\n    steps.push(_jsx(StepUserData, { initialEmail: userEmail, initialData: formData.userData, onNext: function (data) {\n            setFormData(function (prev) { return (__assign(__assign({}, prev), { userData: data })); });\n            nextStep();\n        }, onBack: prevStep }, \"user-data\"));\n    steps.push(_jsx(StepPayment, { eventTitle: event.title, amount: event.price * (event.seatingType === 'none' ? formData.count : (Array.isArray(formData.seat) ? formData.seat.length : 1)), onPay: function () { return __awaiter(void 0, void 0, void 0, function () {\n            var seatToSend, e_1;\n            var _a, _b, _c, _d;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        if (!formData.userData)\n                            return [2 /*return*/];\n                        setLoading(true);\n                        setError(null);\n                        setToast(null);\n                        _e.label = 1;\n                    case 1:\n                        _e.trys.push([1, 4, 5, 6]);\n                        seatToSend = formData.seat;\n                        if (event.seatingType === 'none') {\n                            seatToSend = Array(formData.count).fill(null); // массив из count билетов без мест\n                        }\n                        return [4 /*yield*/, dispatch(buyTicket(__assign({ eventId: Number(eventId), seat: Array.isArray(seatToSend) && seatToSend.length === 1 ? seatToSend[0] : seatToSend }, formData.userData)))];\n                    case 2:\n                        _e.sent();\n                        return [4 /*yield*/, dispatch(fetchUserTickets())];\n                    case 3:\n                        _e.sent();\n                        setToast({ message: 'Билеты успешно куплены!', type: 'success' });\n                        nextStep();\n                        return [3 /*break*/, 6];\n                    case 4:\n                        e_1 = _e.sent();\n                        setError((e_1 === null || e_1 === void 0 ? void 0 : e_1.message) || ((_b = (_a = e_1 === null || e_1 === void 0 ? void 0 : e_1.response) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.message) || 'Ошибка при покупке билета');\n                        setToast({ message: (e_1 === null || e_1 === void 0 ? void 0 : e_1.message) || ((_d = (_c = e_1 === null || e_1 === void 0 ? void 0 : e_1.response) === null || _c === void 0 ? void 0 : _c.data) === null || _d === void 0 ? void 0 : _d.message) || 'Ошибка при покупке билета', type: 'error' });\n                        return [3 /*break*/, 6];\n                    case 5:\n                        setLoading(false);\n                        return [7 /*endfinally*/];\n                    case 6: return [2 /*return*/];\n                }\n            });\n        }); }, loading: loading, onBack: prevStep }, \"payment\"));\n    steps.push(_jsx(StepSuccess, { eventTitle: event.title, places: Array.isArray(formData.seat) ? formData.seat : undefined, count: event.seatingType === 'none' ? formData.count : (Array.isArray(formData.seat) ? formData.seat.length : 1), onGoToTickets: function () { return navigate('/my-tickets'); }, onGoHome: function () { return navigate('/'); } }, \"success\"));\n    return (_jsxs(\"div\", { children: [_jsx(\"h1\", { children: \"\\u041F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0430 \\u0431\\u0438\\u043B\\u0435\\u0442\\u0430\" }), loading && _jsx(\"p\", { children: \"\\u041F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0430 \\u0431\\u0438\\u043B\\u0435\\u0442\\u0430...\" }), error && _jsx(\"p\", { style: { color: 'red' }, children: error }), toast && _jsx(Toast, { message: toast.message, type: toast.type, onClose: function () { return setToast(null); } }), steps[step]] }));\n};\nexport default BuyTicketPage;\n","import { jsx as _jsx, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { Navigate } from 'react-router-dom';\nimport { useAppSelector } from '@/shared/lib/hooks';\nvar ProtectedRoute = function (_a) {\n    var children = _a.children;\n    var isAuthenticated = useAppSelector(function (state) { return state.auth; }).isAuthenticated;\n    if (!isAuthenticated) {\n        return _jsx(Navigate, { to: \"/\", replace: true });\n    }\n    return _jsx(_Fragment, { children: children });\n};\nexport default ProtectedRoute;\n","// extracted by mini-css-extract-plugin\nexport default {\"app\":\"oNLuKqJw\",\"main\":\"QPT3LbSV\"};","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { store } from './app/store';\nimport Header from '@/widgets/Header/Header';\nimport HomePage from '@/pages/HomePage/ui/HomePage';\nimport ProfilePage from '@/pages/ProfilePage/ProfilePage';\nimport MyTicketsPage from '@/pages/MyTicketPage/MyTicketsPage';\nimport BuyTicketPage from '@/pages/BuyTicketPage';\nimport ProtectedRoute from '@/shared/ui/ProtectedRoute';\nimport styles from './app/styles/App.module.scss';\nimport { checkAuth } from '@/features/AuthModal/model/authSlice';\nvar basename = process.env.NODE_ENV === 'production' ? '/ebilet' : '';\nvar AppContent = function () {\n    useEffect(function () {\n        store.dispatch(checkAuth());\n    }, []);\n    return (_jsxs(\"div\", { className: styles.app, children: [_jsx(Header, {}), _jsx(\"main\", { className: styles.main, children: _jsxs(Routes, { children: [_jsx(Route, { path: \"/\", element: _jsx(HomePage, {}) }), _jsx(Route, { path: \"/profile\", element: _jsx(ProtectedRoute, { children: _jsx(ProfilePage, {}) }) }), _jsx(Route, { path: \"/my-tickets\", element: _jsx(ProtectedRoute, { children: _jsx(MyTicketsPage, {}) }) }), _jsx(Route, { path: \"/buy/:eventId\", element: _jsx(BuyTicketPage, {}) })] }) })] }));\n};\nvar App = function () {\n    return (_jsx(Provider, { store: store, children: _jsx(Router, { basename: basename, children: _jsx(AppContent, {}) }) }));\n};\nexport default App;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport '@/shared/styles/index.scss';\nvar root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(_jsx(React.StrictMode, { children: _jsx(App, {}) }));\n"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","_","label","sent","trys","ops","g","Object","create","Iterator","prototype","verb","Symbol","iterator","this","n","v","op","TypeError","call","pop","length","push","__spreadArray","to","from","pack","arguments","ar","i","l","Array","slice","concat","api","axios","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","_a","authAPI","userData","post","data","credentials","file","formData","FormData","append","delete","city","patch","eventId","get","username","eventAPI","args_1","_i","filters","params","URLSearchParams","category","subcategory","priceRange","undefined","min","String","max","search","id","eventData","initialState","user","isAuthenticated","loading","error","userTickets","register","userData_1","_b","response","err_1","rejectWithValue","_c","setItem","message","login","credentials_1","err_2","uploadAvatar","file_1","error_1","_d","_e","avatarUrl","resetAvatar","_1","error_2","updateCity","city_1","updateUsername","username_1","addFavorite","eventId_1","removeFavorite","fetchFavorites","buyTicket","data_1","fetchUserTickets","checkAuth","err_10","removeItem","authSlice","name","reducers","logout","state","clearError","extraReducers","builder","addCase","pending","action","payload","favorites","includes","filter","map","event","actions","fetchEvents","createEvent","fetchUserEvents","eventSlice","events","unshift","fetchCityByIP","url","latitude","longitude","nominatimUrl","nomRes","nomData","ruCity","_f","_g","fetch","ok","json","status","address","town","village","citySlice","showPicker","openPicker","closePicker","setCity","searchSlice","setSearch","dateRange","start","end","onlyMyCity","filterSlice","setFilters","resetFilters","mobileMenuSlice","isOpen","showLogoutConfirm","openMenu","closeMenu","hideLogoutConfirm","store","reducer","auth","mobileMenu","useAppDispatch","useAppSelector","__assign","assign","s","p","hasOwnProperty","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","onClose","dispatch","useState","isLogin","setIsLogin","email","password","confirmPassword","setFormData","successMessage","setSuccessMessage","handleChange","target","useEffect","scrollbarWidth","window","scrollDiv","document","createElement","style","width","height","overflow","position","top","appendChild","offsetWidth","clientWidth","removeChild","getScrollbarWidth","paddingRight","handleKeyDown_1","key","addEventListener","removeEventListener","className","onClick","children","stopPropagation","onSubmit","loginData","registerData","preventDefault","alert","match","setTimeout","type","placeholder","onChange","required","disabled","MobileMenuIcon","viewBox","fill","xmlns","d","CloseIcon","ProfileIcon","EventsIcon","LogoutIcon","LoginIcon","CityIcon","marginRight","russianCities","editing","setEditing","input","setInput","displayCity","handleSave","trim","useChangeCity","suggestions","setSuggestions","activeSuggestionIndex","setActiveSuggestionIndex","suggestionsRef","useRef","inputRef","handleSuggestionClick","handleClickOutside","current","contains","title","innerWidth","ref","filteredCities","toLowerCase","startsWith","onKeyDown","prev","autoFocus","index","navigate","showUserMenu","setShowUserMenu","setShowLogoutConfirm","onLogout","onProfileClick","useUserMenu","handleClick","menu","getElementById","src","alt","href","MobileMenu","onLoginClick","isLogoutConfirmShown","handleClose","isAuthModalOpen","setIsAuthModalOpen","replace","dateString","isFavorite","onAddToFavorites","onRemoveFromFavorites","onBuyTicket","ticketCount","ticketSeats","imageUrl","description","date","Date","toLocaleDateString","day","month","year","location","price","margin","fontSize","join","isTicket","color","fontWeight","eventsGrid","idx","clsx","skeletonCard","card","skeletonImage","skeletonContent","skeletonTitle","skeletonText","skeletonActions","errorStub","errorStubIcon","cx","cy","r","stroke","strokeWidth","strokeLinecap","errorStubText","emptyStub","emptyStubIcon","emptyStubText","subcategoriesMap","concert","theater","exhibition","sport","setIsOpen","field","newFilters","handleReset","closeFilters","strokeLinejoin","subcat","charAt","toUpperCase","Number","checked","htmlFor","pad","toString","padStart","formatDate","getFullYear","getMonth","getDate","weekDays","months","CalendarModal","selectedDate","selectedRange","onCalendarChange","onClear","selected","startDate","endDate","selectsRange","inline","locale","ru","dateFormat","display","gap","marginTop","background","props","onDateSelect","onRangeSelect","today","calendarOpen","setState","onReset","handleDateClick","formatted","handleCalendarChange","dates","isArray","handleMonthChange","direction","newMonth","newYear","handleClear","useDateStrip","days","setDate","getMonthDays","firstDay","getDay","isToday","toDateString","isSelected","weekDay","toISOString","useHomePage","debouncedFilters","delay","debouncedValue","setDebouncedValue","handler","clearTimeout","useDebounce","filteredEvents","normalizedSearch","matchesSearch","matchesCategory","matchesDate","eventDate","filterStart","filterEnd","matchesPrice","filteredEvents_1","event_1","useEventList","showLoader","setShowLoader","showAuthAlert","setShowAuthAlert","showAuthModal","setShowAuthModal","filtersToSend","timeout","handleAddToFavorites","handleRemoveFromFavorites","handleBuyTicket","handleDateSelect","handleRangeSelect","modalStyle","left","alignItems","justifyContent","zIndex","boxStyle","borderRadius","padding","boxShadow","minWidth","maxWidth","textAlign","buttonStyle","border","cursor","closeStyle","right","onAuthClick","marginBottom","isEditing","setIsEditing","setUsername","updateError","setUpdateError","handleUsernameSave","accept","files","tab","TABS","activeTab","setActiveTab","favoriteEvents","groupedTickets","reduce","acc","ticket","seat","ticketsForWidget","values","onNext","onBack","nextText","isNextDisabled","isLoading","SECTORS","startAngle","endAngle","seatingType","initialSeats","bookedSeats","setBookedSeats","selectedSeats","setSelectedSeats","setLoading","setError","seats","catch","finally","handleSelect","useChooseSeat","legend","legendItem","legendBoxFree","legendBoxSelected","legendBoxBooked","sceneLabel","grid","rowIdx","gridRow","seatIdx","fromCharCode","isBooked","seatButton","booked","circleWrapper","x","rx","textAnchor","sector","sectorIdx","sectorAngle","seatNum","Math","cos","PI","sin","opacity","radius","rad","SEAT_SIZE","transition","pointerEvents","selectedInfo","maxInfo","validateEmail","test","validatePhone","phone","initialEmail","initialData","setName","setPhone","setEmail","touched","setTouched","isValid","useUserData","form","autoComplete","inputWrapper","onBlur","inputError","icon","eventTitle","amount","onPay","setCard","cvv","setCvv","dateRef","cvvRef","isCardValid","isDateValid","split","mm","yy","now","thisYear","thisMonth","isCvvValid","formatCardNumber","usePayment","summary","raw","focus","maxLength","row","flex","val","secure","secureIcon","prevButton","payButton","places","count","onGoToTickets","onGoHome","initialCount","setCount","decrement","c","increment","useChooseCount","bgColors","success","info","duration","timer","animation","marginLeft","userEmail","setStep","setEvent","eventLoading","setEventLoading","_h","eventError","setEventError","_j","toast","setToast","steps","nextStep","prevStep","chosenSeats","selectedCount","seatToSend","e_1","AppContent","path","element","basename","render"],"sourceRoot":""}